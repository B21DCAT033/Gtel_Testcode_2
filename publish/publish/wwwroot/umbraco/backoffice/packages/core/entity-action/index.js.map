{"version":3,"file":"index.js","sources":["../../../../src/packages/core/entity-action/global-components/entity-actions-table-column-view/entity-actions-table-column-view.element.ts","../../../../src/packages/core/entity-action/entity-action-list.element.ts","../../../../src/packages/core/entity-action/entity-updated.event.ts","../../../../src/packages/core/entity-action/entity-deleted.event.ts","../../../../src/packages/core/entity-action/request-reload-children-of-entity.event.ts"],"sourcesContent":["import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { html, nothing, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\nconst elementName = 'umb-entity-actions-table-column-view';\r\n@customElement(elementName)\r\nexport class UmbEntityActionsTableColumnViewElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tvalue?: UmbEntityModel;\r\n\r\n\t@state()\r\n\t_isOpen = false;\r\n\r\n\toverride render() {\r\n\t\tif (!this.value) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-entity-actions-bundle .entityType=${this.value.entityType} .unique=${this.value.unique}>\r\n\t\t\t</umb-entity-actions-bundle>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t[elementName]: UmbEntityActionsTableColumnViewElement;\r\n\t}\r\n}\r\n","import type { UmbEntityActionArgs } from './types.js';\r\nimport type { ManifestEntityAction, MetaEntityAction } from './entity-action.extension.js';\r\nimport { UmbEntityContext } from '@umbraco-cms/backoffice/entity';\r\nimport { html, customElement, property, state, css } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbApiConstructorArgumentsMethodType } from '@umbraco-cms/backoffice/extension-api';\r\n\r\n@customElement('umb-entity-action-list')\r\nexport class UmbEntityActionListElement extends UmbLitElement {\r\n\t@property({ type: String, attribute: 'entity-type' })\r\n\tpublic get entityType(): string | undefined {\r\n\t\treturn this._props.entityType;\r\n\t}\r\n\tpublic set entityType(value: string | undefined) {\r\n\t\tif (value === undefined || value === this._props.entityType) return;\r\n\t\tthis._props.entityType = value;\r\n\t\tthis.#generateApiArgs();\r\n\t\tthis.requestUpdate('_props');\r\n\t\t// Update filter:\r\n\t\t//const oldValue = this._filter;\r\n\t\tthis._filter = (extension: ManifestEntityAction<MetaEntityAction>) => extension.forEntityTypes.includes(value);\r\n\t\t//this.requestUpdate('_filter', oldValue);\r\n\t}\r\n\r\n\t@state()\r\n\t_filter?: (extension: ManifestEntityAction<MetaEntityAction>) => boolean;\r\n\r\n\t@property({ type: String })\r\n\tpublic get unique(): string | null | undefined {\r\n\t\treturn this._props.unique;\r\n\t}\r\n\tpublic set unique(value: string | null | undefined) {\r\n\t\tif (value === this._props.unique) return;\r\n\t\tthis._props.unique = value;\r\n\t\tthis.#generateApiArgs();\r\n\t\tthis.requestUpdate('_props');\r\n\t}\r\n\r\n\t@state()\r\n\t_props: Partial<UmbEntityActionArgs<unknown>> = {};\r\n\r\n\t@state()\r\n\t_apiArgs?: UmbApiConstructorArgumentsMethodType<\r\n\t\tManifestEntityAction<MetaEntityAction>,\r\n\t\t[UmbEntityActionArgs<MetaEntityAction>]\r\n\t>;\r\n\r\n\t#entityContext = new UmbEntityContext(this);\r\n\r\n\t#generateApiArgs() {\r\n\t\tif (!this._props.entityType || this._props.unique === undefined) return;\r\n\r\n\t\tthis.#entityContext.setEntityType(this._props.entityType);\r\n\t\tthis.#entityContext.setUnique(this._props.unique);\r\n\t\tthis.#hasRenderedOnce = false;\r\n\r\n\t\tthis._apiArgs = (manifest: ManifestEntityAction<MetaEntityAction>) => {\r\n\t\t\treturn [{ entityType: this._props.entityType!, unique: this._props.unique!, meta: manifest.meta }];\r\n\t\t};\r\n\t}\r\n\r\n\t#hasRenderedOnce?: boolean;\r\n\toverride render() {\r\n\t\treturn this._filter\r\n\t\t\t? html`\r\n\t\t\t\t\t<umb-extension-with-api-slot\r\n\t\t\t\t\t\ttype=\"entityAction\"\r\n\t\t\t\t\t\t.filter=${this._filter}\r\n\t\t\t\t\t\t.elementProps=${this._props}\r\n\t\t\t\t\t\t.apiArgs=${this._apiArgs}\r\n\t\t\t\t\t\t.renderMethod=${(ext: any, i: number) => {\r\n\t\t\t\t\t\t\tif (!this.#hasRenderedOnce && i === 0) {\r\n\t\t\t\t\t\t\t\t// TODO: Replace this block:\r\n\t\t\t\t\t\t\t\text.component?.updateComplete.then(async () => {\r\n\t\t\t\t\t\t\t\t\tconst menuitem = ext.component?.shadowRoot?.querySelector('uui-menu-item');\r\n\t\t\t\t\t\t\t\t\tmenuitem?.updateComplete.then(async () => {\r\n\t\t\t\t\t\t\t\t\t\tmenuitem?.shadowRoot?.querySelector('#label-button')?.focus?.();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// end of block, with this, when this PR is part of UI Lib: https://github.com/umbraco/Umbraco.UI/pull/789\r\n\t\t\t\t\t\t\t\t// ext.component?.focus();\r\n\t\t\t\t\t\t\t\tthis.#hasRenderedOnce = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ext.component;\r\n\t\t\t\t\t\t}}></umb-extension-with-api-slot>\r\n\t\t\t\t`\r\n\t\t\t: '';\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-entity-action-list': UmbEntityActionListElement;\r\n\t}\r\n}\r\n","import type { UmbEntityActionEventArgs } from './entity-action.event.js';\r\nimport { UmbEntityActionEvent } from './entity-action.event.js';\r\n\r\nexport class UmbEntityUpdatedEvent extends UmbEntityActionEvent {\r\n\tstatic readonly TYPE = 'entity-updated';\r\n\r\n\tconstructor(args: UmbEntityActionEventArgs) {\r\n\t\tsuper(UmbEntityUpdatedEvent.TYPE, args);\r\n\t}\r\n}\r\n","import type { UmbEntityActionEventArgs } from './entity-action.event.js';\r\nimport { UmbEntityActionEvent } from './entity-action.event.js';\r\n\r\nexport class UmbEntityDeletedEvent extends UmbEntityActionEvent {\r\n\tstatic readonly TYPE = 'entity-deleted';\r\n\r\n\tconstructor(args: UmbEntityActionEventArgs) {\r\n\t\tsuper(UmbEntityDeletedEvent.TYPE, args);\r\n\t}\r\n}\r\n","import type { UmbEntityActionEventArgs } from './entity-action.event.js';\r\nimport { UmbEntityActionEvent } from './entity-action.event.js';\r\n\r\nexport class UmbRequestReloadChildrenOfEntityEvent extends UmbEntityActionEvent {\r\n\tstatic readonly TYPE = 'request-reload-children-of-entity';\r\n\r\n\tconstructor(args: UmbEntityActionEventArgs) {\r\n\t\tsuper(UmbRequestReloadChildrenOfEntityEvent.TYPE, args);\r\n\t}\r\n}\r\n"],"names":["elementName","UmbEntityActionsTableColumnViewElement","UmbLitElement","html","nothing","__decorateClass","property","state","customElement","_entityContext","_UmbEntityActionListElement_instances","generateApiArgs_fn","_hasRenderedOnce","UmbEntityActionListElement","__privateAdd","UmbEntityContext","value","__privateMethod","extension","ext","i","__privateGet","menuitem","__privateSet","manifest","css","UmbEntityUpdatedEvent","UmbEntityActionEvent","args","UmbEntityDeletedEvent","UmbRequestReloadChildrenOfEntityEvent"],"mappings":"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"}