{"version":3,"file":"sort-children-of-modal.token-BqL-ygDY.js","sources":["../../../src/packages/core/tree/folder/modal/folder-create-modal.token.ts","../../../src/packages/core/tree/folder/modal/folder-update-modal.token.ts","../../../src/packages/core/tree/folder/entity-action/create-folder/create-folder.action.ts","../../../src/packages/core/tree/folder/entity-action/delete-folder/delete-folder.action.ts","../../../src/packages/core/tree/folder/entity-action/update-folder/update-folder.action.ts","../../../src/packages/core/tree/tree-item/tree-item-default/manifests.ts","../../../src/packages/core/tree/entity-actions/duplicate-to/modal/duplicate-to-modal.token.ts","../../../src/packages/core/tree/entity-actions/sort-children-of/modal/sort-children-of-modal.token.ts"],"sourcesContent":["import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbFolderModel } from '@umbraco-cms/backoffice/tree';\r\n\r\nexport interface UmbFolderCreateModalData {\r\n\tfolderRepositoryAlias: string;\r\n\tparent: UmbEntityModel;\r\n}\r\n\r\nexport interface UmbFolderCreateModalValue {\r\n\tfolder: UmbFolderModel;\r\n}\r\n\r\nexport const UMB_FOLDER_CREATE_MODAL = new UmbModalToken<UmbFolderCreateModalData, UmbFolderCreateModalValue>(\r\n\t'Umb.Modal.Folder.Create',\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbFolderModel } from '@umbraco-cms/backoffice/tree';\r\n\r\nexport interface UmbFolderUpdateModalData {\r\n\tfolderRepositoryAlias: string;\r\n\tunique: string;\r\n}\r\n\r\nexport interface UmbFolderUpdateModalValue {\r\n\tfolder: UmbFolderModel;\r\n}\r\n\r\nexport const UMB_FOLDER_UPDATE_MODAL = new UmbModalToken<UmbFolderUpdateModalData, UmbFolderUpdateModalValue>(\r\n\t'Umb.Modal.Folder.Update',\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import { UMB_FOLDER_CREATE_MODAL } from '../../modal/index.js';\r\nimport type { MetaEntityActionFolderKind } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadChildrenOfEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport class UmbCreateFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\toverride async execute() {\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modalContext = modalManager.open(this, UMB_FOLDER_CREATE_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tfolderRepositoryAlias: this.args.meta.folderRepositoryAlias,\r\n\t\t\t\tparent: {\r\n\t\t\t\t\tunique: this.args.unique,\r\n\t\t\t\t\tentityType: this.args.entityType,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait modalContext.onSubmit();\r\n\r\n\t\tconst eventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tconst event = new UmbRequestReloadChildrenOfEntityEvent({\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t\tunique: this.args.unique,\r\n\t\t});\r\n\r\n\t\teventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n","import type { MetaEntityActionFolderKind, UmbFolderModel } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbEntityActionArgs } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbEntityActionBase, UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbExtensionApiInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { umbConfirmModal } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbDetailRepository } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport class UmbDeleteFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\t// TODO: make base type for item and detail models\r\n\t#folderRepository?: UmbDetailRepository<UmbFolderModel>;\r\n\t#init: Promise<unknown>;\r\n\r\n\tconstructor(host: UmbControllerHost, args: UmbEntityActionArgs<MetaEntityActionFolderKind>) {\r\n\t\tsuper(host, args);\r\n\r\n\t\t// TODO: We should properly look into how we can simplify the one time usage of a extension api, as its a bit of overkill to take conditions/overwrites and observation of extensions into play here: [NL]\r\n\t\t// But since this happens when we execute an action, it does most likely not hurt any users, but it is a bit of a overkill to do this for every action: [NL]\r\n\t\tthis.#init = Promise.all([\r\n\t\t\tnew UmbExtensionApiInitializer(\r\n\t\t\t\tthis._host,\r\n\t\t\t\tumbExtensionsRegistry,\r\n\t\t\t\tthis.args.meta.folderRepositoryAlias,\r\n\t\t\t\t[this._host],\r\n\t\t\t\t(permitted, ctrl) => {\r\n\t\t\t\t\tthis.#folderRepository = permitted ? (ctrl.api as UmbDetailRepository<UmbFolderModel>) : undefined;\r\n\t\t\t\t},\r\n\t\t\t).asPromise(),\r\n\t\t]);\r\n\t}\r\n\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Unique is not available');\r\n\t\tawait this.#init;\r\n\r\n\t\tconst { data: folder } = await this.#folderRepository!.requestByUnique(this.args.unique);\r\n\r\n\t\tif (folder) {\r\n\t\t\t// TODO: maybe we can show something about how many items are part of the folder?\r\n\t\t\tawait umbConfirmModal(this._host, {\r\n\t\t\t\theadline: `Delete folder ${folder.name}`,\r\n\t\t\t\tcontent: 'Are you sure you want to delete this folder?',\r\n\t\t\t\tcolor: 'danger',\r\n\t\t\t\tconfirmLabel: 'Delete',\r\n\t\t\t});\r\n\r\n\t\t\tawait this.#folderRepository?.delete(this.args.unique);\r\n\r\n\t\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\t\tconst event = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\t\tunique: this.args.unique,\r\n\t\t\t\tentityType: this.args.entityType,\r\n\t\t\t});\r\n\r\n\t\t\tactionEventContext.dispatchEvent(event);\r\n\t\t}\r\n\t}\r\n}\r\n","import { UMB_FOLDER_UPDATE_MODAL } from '../../modal/index.js';\r\nimport type { MetaEntityActionFolderKind } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport class UmbUpdateFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Unique is not available');\r\n\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modalContext = modalManager.open(this, UMB_FOLDER_UPDATE_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tfolderRepositoryAlias: this.args.meta.folderRepositoryAlias,\r\n\t\t\t\tunique: this.args.unique,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait modalContext.onSubmit();\r\n\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tconst event = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n","import type { UmbExtensionManifestKind } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nexport const UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST: UmbExtensionManifestKind = {\r\n\ttype: 'kind',\r\n\talias: 'Umb.Kind.TreeItem.Default',\r\n\tmatchKind: 'default',\r\n\tmatchType: 'treeItem',\r\n\tmanifest: {\r\n\t\ttype: 'treeItem',\r\n\t\tapi: () => import('./tree-item-default.context.js'),\r\n\t\telement: () => import('./tree-item-default.element.js'),\r\n\t},\r\n};\r\n\r\nexport const manifests: Array<UmbExtensionManifest | UmbExtensionManifestKind> = [UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST];\r\n","import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport const UMB_DUPLICATE_TO_MODAL_ALIAS = 'Umb.Modal.DuplicateTo';\r\n\r\nexport interface UmbDuplicateToModalData extends UmbEntityModel {\r\n\ttreeAlias: string;\r\n\tfoldersOnly?: boolean;\r\n}\r\n\r\nexport interface UmbDuplicateToModalValue {\r\n\tdestination: {\r\n\t\tunique: string | null;\r\n\t};\r\n}\r\n\r\nexport const UMB_DUPLICATE_TO_MODAL = new UmbModalToken<UmbDuplicateToModalData, UmbDuplicateToModalValue>(\r\n\tUMB_DUPLICATE_TO_MODAL_ALIAS,\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport const UMB_SORT_CHILDREN_OF_MODAL_ALIAS = 'Umb.Modal.SortChildrenOf';\r\n\r\nexport interface UmbSortChildrenOfModalData extends UmbEntityModel {\r\n\ttreeRepositoryAlias: string;\r\n\tsortChildrenOfRepositoryAlias: string;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\r\nexport interface UmbSortChildrenOfModalValue {}\r\n\r\nexport const UMB_SORT_CHILDREN_OF_MODAL = new UmbModalToken<UmbSortChildrenOfModalData, UmbSortChildrenOfModalValue>(\r\n\tUMB_SORT_CHILDREN_OF_MODAL_ALIAS,\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n"],"names":["UMB_FOLDER_CREATE_MODAL","UmbModalToken","UMB_FOLDER_UPDATE_MODAL","UmbCreateFolderEntityAction","UmbEntityActionBase","UMB_MODAL_MANAGER_CONTEXT","eventContext","UMB_ACTION_EVENT_CONTEXT","event","UmbRequestReloadChildrenOfEntityEvent","UmbDeleteFolderEntityAction","#folderRepository","#init","host","args","UmbExtensionApiInitializer","umbExtensionsRegistry","permitted","ctrl","folder","umbConfirmModal","actionEventContext","UmbRequestReloadStructureForEntityEvent","UmbUpdateFolderEntityAction","UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST","manifests","UMB_DUPLICATE_TO_MODAL_ALIAS","UMB_DUPLICATE_TO_MODAL","UMB_SORT_CHILDREN_OF_MODAL_ALIAS","UMB_SORT_CHILDREN_OF_MODAL"],"mappings":"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"}