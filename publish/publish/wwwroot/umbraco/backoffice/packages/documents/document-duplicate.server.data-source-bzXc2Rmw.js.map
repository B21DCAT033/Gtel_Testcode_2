{"version":3,"file":"document-duplicate.server.data-source-bzXc2Rmw.js","sources":["../../../src/packages/documents/documents/entity-actions/duplicate/repository/document-duplicate.server.data-source.ts"],"sourcesContent":["import type { UmbDuplicateDocumentRequestArgs } from './types.js';\r\nimport { DocumentService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { tryExecuteAndNotify } from '@umbraco-cms/backoffice/resources';\r\n\r\n/**\r\n * Duplicate Document Server Data Source\r\n * @class UmbDuplicateDocumentServerDataSource\r\n */\r\nexport class UmbDuplicateDocumentServerDataSource {\r\n\t#host: UmbControllerHost;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbDuplicateDocumentServerDataSource.\r\n\t * @param {UmbControllerHost} host - The controller host for this controller to be appended to\r\n\t * @memberof UmbDuplicateDocumentServerDataSource\r\n\t */\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\t/**\r\n\t * Duplicate an item for the given id to the destination unique\r\n\t * @param {UmbDuplicateDocumentRequestArgs} args\r\n\t * @returns {*}\r\n\t * @memberof UmbDuplicateDocumentServerDataSource\r\n\t */\r\n\tasync duplicate(args: UmbDuplicateDocumentRequestArgs) {\r\n\t\tif (!args.unique) throw new Error('Unique is missing');\r\n\t\tif (args.destination.unique === undefined) throw new Error('Destination unique is missing');\r\n\r\n\t\treturn tryExecuteAndNotify(\r\n\t\t\tthis.#host,\r\n\t\t\tDocumentService.postDocumentByIdCopy({\r\n\t\t\t\tid: args.unique,\r\n\t\t\t\trequestBody: {\r\n\t\t\t\t\ttarget: args.destination.unique ? { id: args.destination.unique } : null,\r\n\t\t\t\t\trelateToOriginal: args.relateToOriginal,\r\n\t\t\t\t\tincludeDescendants: args.includeDescendants,\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n}\r\n"],"names":["UmbDuplicateDocumentServerDataSource","#host","host","args","tryExecuteAndNotify","DocumentService"],"mappings":";;AASO,MAAMA,EAAqC;AAAA,EACjDC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,YAAYC,GAAyB;AACpC,SAAKD,KAAQC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASd,MAAM,UAAUC,GAAuC;AACtD,QAAI,CAACA,EAAK,OAAc,OAAA,IAAI,MAAM,mBAAmB;AACrD,QAAIA,EAAK,YAAY,WAAW,OAAiB,OAAA,IAAI,MAAM,+BAA+B;AAEnF,WAAAC;AAAA,MACN,KAAKH;AAAA,MACLI,EAAgB,qBAAqB;AAAA,QACpC,IAAIF,EAAK;AAAA,QACT,aAAa;AAAA,UACZ,QAAQA,EAAK,YAAY,SAAS,EAAE,IAAIA,EAAK,YAAY,OAAA,IAAW;AAAA,UACpE,kBAAkBA,EAAK;AAAA,UACvB,oBAAoBA,EAAK;AAAA,QAAA;AAAA,MAE1B,CAAA;AAAA,IACF;AAAA,EAAA;AAEF;"}