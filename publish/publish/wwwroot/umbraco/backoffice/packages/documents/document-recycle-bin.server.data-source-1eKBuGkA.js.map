{"version":3,"file":"document-recycle-bin.server.data-source-1eKBuGkA.js","sources":["../../../src/packages/documents/documents/recycle-bin/repository/document-recycle-bin.server.data-source.ts"],"sourcesContent":["import type {\r\n\tUmbRecycleBinDataSource,\r\n\tUmbRecycleBinRestoreRequestArgs,\r\n\tUmbRecycleBinTrashRequestArgs,\r\n\tUmbRecycleBinOriginalParentRequestArgs,\r\n} from '@umbraco-cms/backoffice/recycle-bin';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { DocumentService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { tryExecuteAndNotify } from '@umbraco-cms/backoffice/resources';\r\n\r\nexport class UmbDocumentRecycleBinServerDataSource implements UmbRecycleBinDataSource {\r\n\t#host: UmbControllerHost;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\ttrash(args: UmbRecycleBinTrashRequestArgs) {\r\n\t\treturn tryExecuteAndNotify(this.#host, DocumentService.putDocumentByIdMoveToRecycleBin({ id: args.unique }));\r\n\t}\r\n\r\n\trestore(args: UmbRecycleBinRestoreRequestArgs) {\r\n\t\treturn tryExecuteAndNotify(\r\n\t\t\tthis.#host,\r\n\t\t\tDocumentService.putRecycleBinDocumentByIdRestore({\r\n\t\t\t\tid: args.unique,\r\n\t\t\t\trequestBody: {\r\n\t\t\t\t\ttarget: args.destination.unique ? { id: args.destination.unique } : null,\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tempty() {\r\n\t\treturn tryExecuteAndNotify(this.#host, DocumentService.deleteRecycleBinDocument());\r\n\t}\r\n\r\n\tasync getOriginalParent(args: UmbRecycleBinOriginalParentRequestArgs) {\r\n\t\tconst { data, error } = await tryExecuteAndNotify(\r\n\t\t\tthis.#host,\r\n\t\t\tDocumentService.getRecycleBinDocumentByIdOriginalParent({ id: args.unique }),\r\n\t\t);\r\n\r\n\t\t// only check for undefined because data can be null if the parent is the root\r\n\t\tif (data !== undefined) {\r\n\t\t\tconst mappedData = data ? { unique: data.id } : null;\r\n\t\t\treturn { data: mappedData };\r\n\t\t}\r\n\r\n\t\treturn { error };\r\n\t}\r\n}\r\n"],"names":["UmbDocumentRecycleBinServerDataSource","#host","host","args","tryExecuteAndNotify","DocumentService","data","error"],"mappings":";;AAUO,MAAMA,EAAyE;AAAA,EACrFC;AAAA,EAEA,YAAYC,GAAyB;AACpC,SAAKD,KAAQC;AAAA,EAAA;AAAA,EAGd,MAAMC,GAAqC;AACnC,WAAAC,EAAoB,KAAKH,IAAOI,EAAgB,gCAAgC,EAAE,IAAIF,EAAK,OAAO,CAAC,CAAC;AAAA,EAAA;AAAA,EAG5G,QAAQA,GAAuC;AACvC,WAAAC;AAAA,MACN,KAAKH;AAAA,MACLI,EAAgB,iCAAiC;AAAA,QAChD,IAAIF,EAAK;AAAA,QACT,aAAa;AAAA,UACZ,QAAQA,EAAK,YAAY,SAAS,EAAE,IAAIA,EAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAErE,CAAA;AAAA,IACF;AAAA,EAAA;AAAA,EAGD,QAAQ;AACP,WAAOC,EAAoB,KAAKH,IAAOI,EAAgB,0BAA0B;AAAA,EAAA;AAAA,EAGlF,MAAM,kBAAkBF,GAA8C;AACrE,UAAM,EAAE,MAAAG,GAAM,OAAAC,EAAM,IAAI,MAAMH;AAAA,MAC7B,KAAKH;AAAA,MACLI,EAAgB,wCAAwC,EAAE,IAAIF,EAAK,OAAQ,CAAA;AAAA,IAC5E;AAGA,WAAIG,MAAS,SAEL,EAAE,MADUA,IAAO,EAAE,QAAQA,EAAK,OAAO,KACtB,IAGpB,EAAE,OAAAC,EAAM;AAAA,EAAA;AAEjB;"}