{"version":3,"file":"document-type-workspace-view-settings.element-CtrNM99m.js","sources":["../../../src/packages/documents/document-types/workspace/document-type/views/settings/document-type-workspace-view-settings.element.ts"],"sourcesContent":["import { UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT } from '../../document-type-workspace.context-token.js';\r\nimport { css, html, customElement, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UUIBooleanInputEvent, UUIToggleElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbWorkspaceViewElement } from '@umbraco-cms/backoffice/workspace';\r\n\r\n@customElement('umb-document-type-workspace-view-settings')\r\nexport class UmbDocumentTypeWorkspaceViewSettingsElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t#workspaceContext?: typeof UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _variesByCulture?: boolean;\r\n\r\n\t@state()\r\n\tprivate _variesBySegment?: boolean;\r\n\r\n\t@state()\r\n\tprivate _isElement?: boolean;\r\n\r\n\t@state()\r\n\tprivate _keepAllVersionsNewerThanDays?: number | null;\r\n\r\n\t@state()\r\n\tprivate _keepLatestVersionPerDayForDays?: number | null;\r\n\r\n\t@state()\r\n\tprivate _preventCleanup?: boolean;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\t// TODO: Figure out if this is the best way to consume the context or if it can be strongly typed with an UmbContextToken\r\n\t\tthis.consumeContext(UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT, (documentTypeContext) => {\r\n\t\t\tthis.#workspaceContext = documentTypeContext;\r\n\t\t\tthis.#observeDocumentType();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeDocumentType() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.variesByCulture,\r\n\t\t\t(variesByCulture) => (this._variesByCulture = variesByCulture),\r\n\t\t);\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.variesBySegment,\r\n\t\t\t(variesBySegment) => (this._variesBySegment = variesBySegment),\r\n\t\t);\r\n\t\tthis.observe(this.#workspaceContext.isElement, (isElement) => (this._isElement = isElement));\r\n\r\n\t\tthis.observe(this.#workspaceContext.cleanup, (cleanup) => {\r\n\t\t\tthis._preventCleanup = cleanup?.preventCleanup;\r\n\t\t\tthis._keepAllVersionsNewerThanDays = cleanup?.keepAllVersionsNewerThanDays;\r\n\t\t\tthis._keepLatestVersionPerDayForDays = cleanup?.keepLatestVersionPerDayForDays;\r\n\t\t});\r\n\t}\r\n\r\n\t#setCleanup() {\r\n\t\tthis.#workspaceContext?.setCleanup({\r\n\t\t\tpreventCleanup: this._preventCleanup ?? false,\r\n\t\t\tkeepAllVersionsNewerThanDays: this._keepAllVersionsNewerThanDays,\r\n\t\t\tkeepLatestVersionPerDayForDays: this._keepLatestVersionPerDayForDays,\r\n\t\t});\r\n\t}\r\n\r\n\t#onChangePreventCleanup(event: UUIBooleanInputEvent) {\r\n\t\tthis._preventCleanup = event.target.checked;\r\n\t\tif (this._preventCleanup) {\r\n\t\t\tthis._keepAllVersionsNewerThanDays = null;\r\n\t\t\tthis._keepLatestVersionPerDayForDays = null;\r\n\t\t}\r\n\t\tthis.#setCleanup();\r\n\t}\r\n\r\n\t#onChangeKeepAllVersionsNewerThanDays(event: Event & { target: HTMLInputElement }) {\r\n\t\tthis._keepAllVersionsNewerThanDays = parseInt(event.target.value);\r\n\t\tthis.#setCleanup();\r\n\t}\r\n\r\n\t#onChangeKeepLatestVersionPerDayForDays(event: Event & { target: HTMLInputElement }) {\r\n\t\tthis._keepLatestVersionPerDayForDays = parseInt(event.target.value);\r\n\t\tthis.#setCleanup();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Data variations\">\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\talias=\"VaryByCulture\"\r\n\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_cultureVariantHeading')}>\r\n\t\t\t\t\t<div slot=\"description\">\r\n\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_cultureVariantDescription\"\r\n\t\t\t\t\t\t\t>Allow editors to create content of different languages.</umb-localize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\t\t?checked=${this._variesByCulture}\r\n\t\t\t\t\t\t\t@change=${(e: CustomEvent) => {\r\n\t\t\t\t\t\t\t\tthis.#workspaceContext?.setVariesByCulture((e.target as UUIToggleElement).checked);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_cultureVariantLabel')}></uui-toggle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\talias=\"VaryBySegments\"\r\n\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_segmentVariantHeading')}>\r\n\t\t\t\t\t<div slot=\"description\">\r\n\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_segmentVariantDescription\"\r\n\t\t\t\t\t\t\t>Allow editors to segment their content.</umb-localize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\t\t?checked=${this._variesBySegment}\r\n\t\t\t\t\t\t\t@change=${(e: CustomEvent) => {\r\n\t\t\t\t\t\t\t\tthis.#workspaceContext?.setVariesBySegment((e.target as UUIToggleElement).checked);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_segmentVariantLabel')}></uui-toggle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t\t<umb-property-layout alias=\"ElementType\" label=${this.localize.term('contentTypeEditor_elementHeading')}>\r\n\t\t\t\t\t<div slot=\"description\">\r\n\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_elementDescription\"\r\n\t\t\t\t\t\t\t>An Element Type is used for content instances in Property Editors, like the Block Editors.</umb-localize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\t\t?checked=${this._isElement}\r\n\t\t\t\t\t\t\t@change=${(e: CustomEvent) => {\r\n\t\t\t\t\t\t\t\tthis.#workspaceContext?.setIsElement((e.target as UUIToggleElement).checked);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_elementType')}></uui-toggle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t</uui-box>\r\n\t\t\t<uui-box headline=${this.localize.term('contentTypeEditor_historyCleanupHeading')}>\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\talias=\"HistoryCleanup\"\r\n\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_historyCleanupHeading')}>\r\n\t\t\t\t\t<div slot=\"description\">\r\n\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_historyCleanupDescription\"\r\n\t\t\t\t\t\t\t>Allow overriding the global history cleanup settings.</umb-localize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\t\t\tid=\"prevent-cleanup\"\r\n\t\t\t\t\t\t\t\tlabel=${this.localize.term('contentTypeEditor_historyCleanupPreventCleanup')}\r\n\t\t\t\t\t\t\t\t.checked=${this._preventCleanup ?? false}\r\n\t\t\t\t\t\t\t\t@change=${this.#onChangePreventCleanup}></uui-toggle>\r\n\t\t\t\t\t\t</uui-form-layout-item>\r\n\r\n\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t!this._preventCleanup,\r\n\t\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t\t\t\t<uui-label slot=\"label\" for=\"versions-newer-than-days\">\r\n\t\t\t\t\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_historyCleanupKeepAllVersionsNewerThanDays\"\r\n\t\t\t\t\t\t\t\t\t\t\t>Keep all versions newer than days</umb-localize\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</uui-label>\r\n\r\n\t\t\t\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"versions-newer-than-days\"\r\n\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"7\"\r\n\t\t\t\t\t\t\t\t\t\t.value=${this._keepAllVersionsNewerThanDays}\r\n\t\t\t\t\t\t\t\t\t\t@change=${this.#onChangeKeepAllVersionsNewerThanDays}></uui-input>\r\n\t\t\t\t\t\t\t\t</uui-form-layout-item>\r\n\r\n\t\t\t\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t\t\t\t<uui-label slot=\"label\" for=\"latest-version-per-day-days\">\r\n\t\t\t\t\t\t\t\t\t\t<umb-localize key=\"contentTypeEditor_historyCleanupKeepLatestVersionPerDayForDays\"\r\n\t\t\t\t\t\t\t\t\t\t\t>Keep latest version per day for days</umb-localize\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</uui-label>\r\n\t\t\t\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"latest-version-per-day-days\"\r\n\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"90\"\r\n\t\t\t\t\t\t\t\t\t\t.value=${this._keepLatestVersionPerDayForDays}\r\n\t\t\t\t\t\t\t\t\t\t@change=${this.#onChangeKeepLatestVersionPerDayForDays}></uui-input>\r\n\t\t\t\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: var(--uui-size-layout-1);\r\n\t\t\t\tpadding-bottom: var(--uui-size-layout-1); // To enforce some distance to the bottom of the scroll-container.\r\n\t\t\t}\r\n\t\t\tuui-box {\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\tuui-label,\r\n\t\t\tumb-property-editor-ui-number {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: is this necessary?\r\n\t\t\tuui-toggle {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentTypeWorkspaceViewSettingsElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-type-workspace-view-settings': UmbDocumentTypeWorkspaceViewSettingsElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_UmbDocumentTypeWorkspaceViewSettingsElement_instances","observeDocumentType_fn","setCleanup_fn","onChangePreventCleanup_fn","onChangeKeepAllVersionsNewerThanDays_fn","onChangeKeepLatestVersionPerDayForDays_fn","UmbDocumentTypeWorkspaceViewSettingsElement","UmbLitElement","__privateAdd","UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT","documentTypeContext","__privateSet","__privateMethod","html","__privateGet","when","variesByCulture","variesBySegment","isElement","cleanup","event","UmbTextStyles","css","__decorateClass","state","customElement","UmbDocumentTypeWorkspaceViewSettingsElement$1"],"mappings":"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"}