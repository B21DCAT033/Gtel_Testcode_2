{"version":3,"file":"document-type-workspace.context-C8uQDU1W.js","sources":["../../../src/packages/documents/document-types/workspace/document-type/document-type-workspace-editor.element.ts","../../../src/packages/documents/document-types/workspace/document-type/document-type-workspace.context.ts"],"sourcesContent":["import { UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT } from './document-type-workspace.context-token.js';\r\nimport type { UmbInputWithAliasElement } from '@umbraco-cms/backoffice/components';\r\nimport { umbFocus, UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { css, html, customElement, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_ICON_PICKER_MODAL } from '@umbraco-cms/backoffice/icon';\r\nimport type { UUITextareaElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { umbBindToValidation } from '@umbraco-cms/backoffice/validation';\r\n\r\n@customElement('umb-document-type-workspace-editor')\r\nexport class UmbDocumentTypeWorkspaceEditorElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _name?: string;\r\n\r\n\t@state()\r\n\tprivate _alias?: string;\r\n\r\n\t@state()\r\n\tprivate _description?: string;\r\n\r\n\t@state()\r\n\tprivate _icon?: string;\r\n\r\n\t@state()\r\n\tprivate _isNew?: boolean;\r\n\r\n\t#workspaceContext?: typeof UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeDocumentType();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeDocumentType() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(this.#workspaceContext.name, (name) => (this._name = name), '_observeName');\r\n\t\tthis.observe(this.#workspaceContext.alias, (alias) => (this._alias = alias), '_observeAlias');\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.description,\r\n\t\t\t(description) => (this._description = description),\r\n\t\t\t'_observeDescription',\r\n\t\t);\r\n\t\tthis.observe(this.#workspaceContext.icon, (icon) => (this._icon = icon), '_observeIcon');\r\n\t\tthis.observe(this.#workspaceContext.isNew, (isNew) => (this._isNew = isNew), '_observeIsNew');\r\n\t}\r\n\r\n\tprivate async _handleIconClick() {\r\n\t\tconst [alias, color] = this._icon?.replace('color-', '')?.split(' ') ?? [];\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modalContext = modalManager.open(this, UMB_ICON_PICKER_MODAL, {\r\n\t\t\tvalue: {\r\n\t\t\t\ticon: alias,\r\n\t\t\t\tcolor: color,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tmodalContext?.onSubmit().then((saved) => {\r\n\t\t\tif (saved.icon && saved.color) {\r\n\t\t\t\tthis.#workspaceContext?.setIcon(`${saved.icon} color-${saved.color}`);\r\n\t\t\t} else if (saved.icon) {\r\n\t\t\t\tthis.#workspaceContext?.setIcon(saved.icon);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t#onNameAndAliasChange(event: InputEvent & { target: UmbInputWithAliasElement }) {\r\n\t\tthis.#workspaceContext?.setName(event.target.value ?? '');\r\n\t\tthis.#workspaceContext?.setAlias(event.target.alias ?? '');\r\n\t}\r\n\r\n\t#onDescriptionChange(event: InputEvent & { target: UUITextareaElement }) {\r\n\t\tthis.#workspaceContext?.setDescription(event.target.value.toString() ?? '');\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<uui-button id=\"icon\" compact label=\"icon\" look=\"outline\" @click=${this._handleIconClick}>\r\n\t\t\t\t\t\t<umb-icon name=${ifDefined(this._icon)}></umb-icon>\r\n\t\t\t\t\t</uui-button>\r\n\r\n\t\t\t\t\t<div id=\"editors\">\r\n\t\t\t\t\t\t<umb-input-with-alias\r\n\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\t\t\t.alias=${this._alias}\r\n\t\t\t\t\t\t\t?auto-generate-alias=${this._isNew}\r\n\t\t\t\t\t\t\t@change=${this.#onNameAndAliasChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t${umbBindToValidation(this, '$.name', this._name)}\r\n\t\t\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t\t\t</umb-input-with-alias>\r\n\r\n\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t.label=${this.localize.term('placeholders_enterDescription')}\r\n\t\t\t\t\t\t\t.value=${this._description}\r\n\t\t\t\t\t\t\t.placeholder=${this.localize.term('placeholders_enterDescription')}\r\n\t\t\t\t\t\t\t@input=${this.#onDescriptionChange}></uui-input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t#editors {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-1);\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#description {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\t--uui-input-height: var(--uui-size-8);\r\n\t\t\t\t--uui-input-border-color: transparent;\r\n\t\t\t}\r\n\r\n\t\t\t#description:hover {\r\n\t\t\t\t--uui-input-border-color: var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t#icon {\r\n\t\t\t\tfont-size: var(--uui-size-8);\r\n\t\t\t\theight: 60px;\r\n\t\t\t\twidth: 60px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentTypeWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-type-workspace-editor': UmbDocumentTypeWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import {\r\n\tUMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN,\r\n\tUMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_ELEMENT,\r\n\tUMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_TEMPLATE,\r\n\tUMB_EDIT_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN,\r\n\ttype UmbCreateDocumentTypeWorkspacePresetType,\r\n} from '../../paths.js';\r\nimport type { UmbDocumentTypeDetailModel } from '../../types.js';\r\nimport { UMB_DOCUMENT_TYPE_ENTITY_TYPE, UMB_DOCUMENT_TYPE_DETAIL_REPOSITORY_ALIAS } from '../../constants.js';\r\nimport { UmbDocumentTypeWorkspaceEditorElement } from './document-type-workspace-editor.element.js';\r\nimport { UMB_DOCUMENT_TYPE_WORKSPACE_ALIAS } from './constants.js';\r\nimport { UmbContentTypeWorkspaceContextBase } from '@umbraco-cms/backoffice/content-type';\r\nimport {\r\n\tUmbWorkspaceIsNewRedirectController,\r\n\tUmbWorkspaceIsNewRedirectControllerAlias,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbContentTypeSortModel, UmbContentTypeWorkspaceContext } from '@umbraco-cms/backoffice/content-type';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbReferenceByUnique } from '@umbraco-cms/backoffice/models';\r\nimport type { UmbRoutableWorkspaceContext } from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbPathPatternTypeAsEncodedParamsType } from '@umbraco-cms/backoffice/router';\r\nimport type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbTemplateDetailRepository } from '@umbraco-cms/backoffice/template';\r\n\r\ntype DetailModelType = UmbDocumentTypeDetailModel;\r\nexport class UmbDocumentTypeWorkspaceContext\r\n\textends UmbContentTypeWorkspaceContextBase<DetailModelType>\r\n\timplements UmbContentTypeWorkspaceContext<DetailModelType>, UmbRoutableWorkspaceContext\r\n{\r\n\t// Document type specific:\r\n\treadonly allowedTemplateIds;\r\n\treadonly defaultTemplate;\r\n\treadonly cleanup;\r\n\r\n\tcreateTemplateMode: boolean = false;\r\n\r\n\t#templateRepository = new UmbTemplateDetailRepository(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_DOCUMENT_TYPE_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_DOCUMENT_TYPE_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_DOCUMENT_TYPE_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\t// Document type specific:\r\n\t\tthis.allowedTemplateIds = this.structure.ownerContentTypeObservablePart((data) => data?.allowedTemplates);\r\n\t\tthis.defaultTemplate = this.structure.ownerContentTypeObservablePart((data) => data?.defaultTemplate);\r\n\t\tthis.cleanup = this.structure.ownerContentTypeObservablePart((data) => data?.cleanup);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN.toString(),\r\n\t\t\t\tcomponent: UmbDocumentTypeWorkspaceEditorElement,\r\n\t\t\t\tsetup: async (_component, info) => {\r\n\t\t\t\t\tconst params = info.match.params as unknown as UmbPathPatternTypeAsEncodedParamsType<\r\n\t\t\t\t\t\ttypeof UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN.PARAMS\r\n\t\t\t\t\t>;\r\n\t\t\t\t\tconst parentEntityType = params.parentEntityType;\r\n\t\t\t\t\tconst parentUnique = params.parentUnique === 'null' ? null : params.parentUnique;\r\n\t\t\t\t\tconst presetAlias = params.presetAlias === 'null' ? null : (params.presetAlias ?? null);\r\n\r\n\t\t\t\t\tif (parentUnique === undefined) {\r\n\t\t\t\t\t\tthrow new Error('ParentUnique url parameter is required to create a document type');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tawait this.#onScaffoldSetup({ entityType: parentEntityType, unique: parentUnique }, presetAlias);\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: UMB_EDIT_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN.toString(),\r\n\t\t\t\tcomponent: UmbDocumentTypeWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tthis.removeUmbControllerByAlias(UmbWorkspaceIsNewRedirectControllerAlias);\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tsetAllowedAtRoot(allowedAtRoot: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ allowedAtRoot });\r\n\t}\r\n\r\n\tsetVariesByCulture(variesByCulture: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ variesByCulture });\r\n\t}\r\n\r\n\tsetVariesBySegment(variesBySegment: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ variesBySegment });\r\n\t}\r\n\r\n\tsetIsElement(isElement: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ isElement });\r\n\t}\r\n\r\n\tsetAllowedContentTypes(allowedContentTypes: Array<UmbContentTypeSortModel>) {\r\n\t\tthis.structure.updateOwnerContentType({ allowedContentTypes });\r\n\t}\r\n\r\n\tsetCleanup(cleanup: UmbDocumentTypeDetailModel['cleanup']) {\r\n\t\tthis.structure.updateOwnerContentType({ cleanup });\r\n\t}\r\n\r\n\tsetCollection(collection: UmbReferenceByUnique) {\r\n\t\tthis.structure.updateOwnerContentType({ collection });\r\n\t}\r\n\r\n\t// Document type specific:\r\n\tgetAllowedTemplateIds() {\r\n\t\treturn this.structure.getOwnerContentType()?.allowedTemplates;\r\n\t}\r\n\r\n\tsetAllowedTemplateIds(allowedTemplates: Array<{ id: string }>) {\r\n\t\tthis.structure.updateOwnerContentType({ allowedTemplates });\r\n\t}\r\n\r\n\tsetDefaultTemplate(defaultTemplate: { id: string } | null) {\r\n\t\tthis.structure.updateOwnerContentType({ defaultTemplate });\r\n\t}\r\n\r\n\tasync #onScaffoldSetup(parent: UmbEntityModel, presetAlias: string | null) {\r\n\t\tlet preset: Partial<DetailModelType> | undefined = undefined;\r\n\r\n\t\tswitch (presetAlias) {\r\n\t\t\tcase UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_TEMPLATE satisfies UmbCreateDocumentTypeWorkspacePresetType: {\r\n\t\t\t\tpreset = {\r\n\t\t\t\t\ticon: 'icon-document-html',\r\n\t\t\t\t};\r\n\t\t\t\tthis.createTemplateMode = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_ELEMENT satisfies UmbCreateDocumentTypeWorkspacePresetType: {\r\n\t\t\t\tpreset = {\r\n\t\t\t\t\ticon: 'icon-plugin',\r\n\t\t\t\t\tisElement: true,\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.createScaffold({ parent, preset });\r\n\t}\r\n\r\n\toverride async _create(currentData: DetailModelType, parent: UmbEntityModel) {\r\n\t\t// TODO: move this responsibility to the template package\r\n\t\tif (this.createTemplateMode) {\r\n\t\t\tawait this.#createAndAssignTemplate();\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsuper._create(currentData, parent);\r\n\t\t\tthis.createTemplateMode = false;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO: move this responsibility to the template package\r\n\tasync #createAndAssignTemplate() {\r\n\t\tconst { data: templateScaffold } = await this.#templateRepository.createScaffold({\r\n\t\t\tname: this.getName(),\r\n\t\t\talias: this.getName(), // NOTE: Uses \"name\" over alias, as the server handle the template filename. [LK]\r\n\t\t});\r\n\r\n\t\tif (!templateScaffold) throw new Error('Could not create template scaffold');\r\n\t\tconst { data: template } = await this.#templateRepository.create(templateScaffold, null);\r\n\t\tif (!template) throw new Error('Could not create template');\r\n\r\n\t\tconst templateEntity = { id: template.unique };\r\n\t\tconst allowedTemplates = this.getAllowedTemplateIds() ?? [];\r\n\t\tthis.setAllowedTemplateIds([templateEntity, ...allowedTemplates]);\r\n\t\tthis.setDefaultTemplate(templateEntity);\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated Use the createScaffold method instead. Will be removed in 17.\r\n\t * @param presetAlias\r\n\t * @param {UmbEntityModel} parent\r\n\t * @memberof UmbMediaTypeWorkspaceContext\r\n\t */\r\n\tasync create(parent: UmbEntityModel, presetAlias: string | null) {\r\n\t\tthis.#onScaffoldSetup(parent, presetAlias);\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentTypeWorkspaceContext as api };\r\n"],"names":["_workspaceContext","_UmbDocumentTypeWorkspaceEditorElement_instances","observeDocumentType_fn","onNameAndAliasChange_fn","onDescriptionChange_fn","UmbDocumentTypeWorkspaceEditorElement","UmbLitElement","__privateAdd","UMB_DOCUMENT_TYPE_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","alias","color","UMB_MODAL_MANAGER_CONTEXT","UMB_ICON_PICKER_MODAL","saved","__privateGet","html","ifDefined","umbBindToValidation","umbFocus","name","description","icon","isNew","event","css","__decorateClass","state","customElement","UmbDocumentTypeWorkspaceContext","UmbContentTypeWorkspaceContextBase","host","UMB_DOCUMENT_TYPE_WORKSPACE_ALIAS","UMB_DOCUMENT_TYPE_ENTITY_TYPE","UMB_DOCUMENT_TYPE_DETAIL_REPOSITORY_ALIAS","#templateRepository","UmbTemplateDetailRepository","data","UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN","_component","info","params","parentEntityType","parentUnique","presetAlias","#onScaffoldSetup","UmbWorkspaceIsNewRedirectController","UMB_EDIT_DOCUMENT_TYPE_WORKSPACE_PATH_PATTERN","UmbWorkspaceIsNewRedirectControllerAlias","unique","allowedAtRoot","variesByCulture","variesBySegment","isElement","allowedContentTypes","cleanup","collection","allowedTemplates","defaultTemplate","parent","preset","UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_TEMPLATE","UMB_CREATE_DOCUMENT_TYPE_WORKSPACE_PRESET_ELEMENT","currentData","#createAndAssignTemplate","error","templateScaffold","template","templateEntity"],"mappings":"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"}