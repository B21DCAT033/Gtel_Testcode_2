{"version":3,"file":"public-access.action-Cp-Kv8n0.js","sources":["../../../src/packages/documents/documents/entity-actions/public-access/public-access.action.ts"],"sourcesContent":["import { UMB_PUBLIC_ACCESS_MODAL } from './modal/public-access-modal.token.js';\r\nimport type { UmbEntityActionArgs } from '@umbraco-cms/backoffice/entity-action';\r\nimport {\r\n\tUmbEntityActionBase,\r\n\tUmbRequestReloadChildrenOfEntityEvent,\r\n\tUmbRequestReloadStructureForEntityEvent,\r\n} from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbDocumentDetailRepository } from '@umbraco-cms/backoffice/document';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\n\r\nexport class UmbDocumentPublicAccessEntityAction extends UmbEntityActionBase<never> {\r\n\tconstructor(host: UmbDocumentDetailRepository, args: UmbEntityActionArgs<never>) {\r\n\t\tsuper(host, args);\r\n\t}\r\n\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Unique is not available');\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modal = modalManager.open(this, UMB_PUBLIC_ACCESS_MODAL, { data: { unique: this.args.unique } });\r\n\t\tawait modal.onSubmit();\r\n\t\tthis.#requestReloadEntity();\r\n\t}\r\n\r\n\tasync #requestReloadEntity() {\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\r\n\t\tconst entityStructureEvent = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tconst entityChildrenEvent = new UmbRequestReloadChildrenOfEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(entityStructureEvent);\r\n\t\tactionEventContext.dispatchEvent(entityChildrenEvent);\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentPublicAccessEntityAction as api };\r\n"],"names":["UmbDocumentPublicAccessEntityAction","UmbEntityActionBase","host","args","UMB_MODAL_MANAGER_CONTEXT","UMB_PUBLIC_ACCESS_MODAL","#requestReloadEntity","actionEventContext","UMB_ACTION_EVENT_CONTEXT","entityStructureEvent","UmbRequestReloadStructureForEntityEvent","entityChildrenEvent","UmbRequestReloadChildrenOfEntityEvent"],"mappings":";;;;AAWO,MAAMA,UAA4CC,EAA2B;AAAA,EACnF,YAAYC,GAAmCC,GAAkC;AAChF,UAAMD,GAAMC,CAAI;AAAA,EAAA;AAAA,EAGjB,MAAe,UAAU;AACxB,QAAI,CAAC,KAAK,KAAK,OAAc,OAAA,IAAI,MAAM,yBAAyB;AAGhE,WAFqB,MAAM,KAAK,WAAWC,CAAyB,GACzC,KAAK,MAAMC,GAAyB,EAAE,MAAM,EAAE,QAAQ,KAAK,KAAK,UAAU,EACzF,SAAS,GACrB,KAAKC,GAAqB;AAAA,EAAA;AAAA,EAG3B,MAAMA,KAAuB;AAC5B,UAAMC,IAAqB,MAAM,KAAK,WAAWC,CAAwB,GAEnEC,IAAuB,IAAIC,EAAwC;AAAA,MACxE,QAAQ,KAAK,KAAK;AAAA,MAClB,YAAY,KAAK,KAAK;AAAA,IAAA,CACtB,GAEKC,IAAsB,IAAIC,EAAsC;AAAA,MACrE,QAAQ,KAAK,KAAK;AAAA,MAClB,YAAY,KAAK,KAAK;AAAA,IAAA,CACtB;AAED,IAAAL,EAAmB,cAAcE,CAAoB,GACrDF,EAAmB,cAAcI,CAAmB;AAAA,EAAA;AAEtD;"}