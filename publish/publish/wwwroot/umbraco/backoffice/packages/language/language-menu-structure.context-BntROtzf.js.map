{"version":3,"file":"language-menu-structure.context-BntROtzf.js","sources":["../../../src/packages/language/menu/language-menu-structure.context.ts"],"sourcesContent":["import type { UmbLanguageDetailModel } from '../types.js';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\n\r\nimport { UMB_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbArrayState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbStructureItemModel } from '@umbraco-cms/backoffice/menu';\r\n\r\nexport class UmbLanguageNavigationStructureWorkspaceContext extends UmbContextBase<UmbLanguageNavigationStructureWorkspaceContext> {\r\n\t// TODO: figure out the correct type where we have \"data\" available\r\n\t#workspaceContext?: any;\r\n\r\n\t#structure = new UmbArrayState<UmbStructureItemModel>([], (x) => x.unique);\r\n\tpublic readonly structure = this.#structure.asObservable();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\t// TODO: set up context token\r\n\t\tsuper(host, 'UmbMenuStructureWorkspaceContext');\r\n\r\n\t\tthis.consumeContext(UMB_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#requestStructure();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #requestStructure() {\r\n\t\tconst data = (await this.observe(this.#workspaceContext?.data, () => {})?.asPromise()) as UmbLanguageDetailModel;\r\n\t\tif (!data) throw new Error('Data is not available');\r\n\r\n\t\tconst items = [\r\n\t\t\t// TODO: figure out if we can get the root from somewhere\r\n\t\t\t// so we don't have to hardcode it\r\n\t\t\t{\r\n\t\t\t\tunique: null,\r\n\t\t\t\tentityType: 'language-root',\r\n\t\t\t\tname: 'Languages',\r\n\t\t\t\tisFolder: false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tunique: data.unique,\r\n\t\t\t\tentityType: data.entityType,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\tisFolder: false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tthis.#structure.setValue(items);\r\n\t}\r\n}\r\n\r\nexport default UmbLanguageNavigationStructureWorkspaceContext;\r\n"],"names":["UmbLanguageNavigationStructureWorkspaceContext","UmbContextBase","host","#structure","UmbArrayState","x","UMB_WORKSPACE_CONTEXT","instance","#workspaceContext","#requestStructure","data","items"],"mappings":";;;AAQO,MAAMA,UAAuDC,EAA+D;AAAA,EAOlI,YAAYC,GAAyB;AAEpC,UAAMA,GAAM,kCAAkC,GAL/C,KAAAC,KAAa,IAAIC,EAAqC,IAAI,CAACC,MAAMA,EAAE,MAAM,GACzD,KAAA,YAAY,KAAKF,GAAW,aAAa,GAMnD,KAAA,eAAeG,GAAuB,CAACC,MAAa;AACxD,WAAKC,KAAoBD,GACzB,KAAKE,GAAkB;AAAA,IAAA,CACvB;AAAA,EAAA;AAAA;AAAA,EAZFD;AAAA,EAEAL;AAAA,EAaA,MAAMM,KAAoB;AACzB,UAAMC,IAAQ,MAAM,KAAK,QAAQ,KAAKF,IAAmB,MAAM,MAAM;AAAA,IAAE,CAAA,GAAG,UAAU;AACpF,QAAI,CAACE,EAAY,OAAA,IAAI,MAAM,uBAAuB;AAElD,UAAMC,IAAQ;AAAA;AAAA;AAAA,MAGb;AAAA,QACC,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,MAAM;AAAA,QACN,UAAU;AAAA,MACX;AAAA,MACA;AAAA,QACC,QAAQD,EAAK;AAAA,QACb,YAAYA,EAAK;AAAA,QACjB,MAAMA,EAAK;AAAA,QACX,UAAU;AAAA,MAAA;AAAA,IAEZ;AAEK,SAAAP,GAAW,SAASQ,CAAK;AAAA,EAAA;AAEhC;"}