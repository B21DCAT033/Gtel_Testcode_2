{"version":3,"file":"logviewer-workspace.element-Ug94NqeS.js","sources":["../../../src/packages/log-viewer/components/log-viewer-date-range-selector.element.ts","../../../src/packages/log-viewer/components/log-viewer-too-many-logs-warning.element.ts","../../../src/packages/log-viewer/workspace/logviewer-workspace.element.ts"],"sourcesContent":["import type { LogViewerDateRange, UmbLogViewerWorkspaceContext } from '../workspace/logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../workspace/logviewer-workspace.context-token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, customElement, property, queryAll, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { query as getQuery, path, toQueryString } from '@umbraco-cms/backoffice/router';\r\n\r\n@customElement('umb-log-viewer-date-range-selector')\r\nexport class UmbLogViewerDateRangeSelectorElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _startDate = '';\r\n\r\n\t@state()\r\n\tprivate _endDate = '';\r\n\r\n\t@queryAll('input')\r\n\tprivate _inputs!: NodeListOf<HTMLInputElement>;\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\thorizontal = false;\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.addEventListener('input', this.#setDates);\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeStuff();\r\n\t\t});\r\n\t}\r\n\toverride disconnectedCallback(): void {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis.removeEventListener('input', this.#setDates);\r\n\t}\r\n\r\n\t#observeStuff() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\t\tthis.observe(\r\n\t\t\tthis.#logViewerContext.dateRange,\r\n\t\t\t(dateRange: LogViewerDateRange) => {\r\n\t\t\t\tthis._startDate = dateRange.startDate;\r\n\t\t\t\tthis._endDate = dateRange.endDate;\r\n\t\t\t},\r\n\t\t\t'_observeDateRange',\r\n\t\t);\r\n\t}\r\n\r\n\t#setDates() {\r\n\t\tthis._inputs.forEach((input) => {\r\n\t\t\tif (input.id === 'start-date') {\r\n\t\t\t\tthis._startDate = input.value;\r\n\t\t\t} else if (input.id === 'end-date') {\r\n\t\t\t\tthis._endDate = input.value;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.#logViewerContext?.setDateRange({ startDate: this._startDate, endDate: this._endDate });\r\n\r\n\t\tconst query = getQuery();\r\n\t\tconst qs = toQueryString({\r\n\t\t\t...query,\r\n\t\t\tstartDate: this._startDate,\r\n\t\t\tendDate: this._endDate,\r\n\t\t});\r\n\r\n\t\twindow.history.pushState({}, '', `${path()}?${qs}`);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<uui-label for=\"start-date\">From:</uui-label>\r\n\t\t\t\t<input\r\n\t\t\t\t\t@click=${(e: Event) => {\r\n\t\t\t\t\t\t(e.target as HTMLInputElement).showPicker();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tid=\"start-date\"\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tlabel=\"From\"\r\n\t\t\t\t\t.max=${this.#logViewerContext?.today ?? ''}\r\n\t\t\t\t\t.value=${this._startDate} />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<uui-label for=\"end-date\">To: </uui-label>\r\n\t\t\t\t<input\r\n\t\t\t\t\t@click=${(e: Event) => {\r\n\t\t\t\t\t\t(e.target as HTMLInputElement).showPicker();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tid=\"end-date\"\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tlabel=\"To\"\r\n\t\t\t\t\t.min=${this._startDate}\r\n\t\t\t\t\t.max=${this.#logViewerContext?.today ?? ''}\r\n\t\t\t\t\t.value=${this._endDate} />\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tinput {\r\n\t\t\t\tfont-family: inherit;\r\n\t\t\t\tpadding: var(--uui-size-1) var(--uui-size-space-3);\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tborder-radius: 0;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\toutline: none;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tborder-bottom: 2px solid transparent;\r\n\t\t\t}\r\n\r\n\t\t\t/* find out better validation for that  */\r\n\t\t\tinput:out-of-range {\r\n\t\t\t\tborder-color: var(--uui-color-danger);\r\n\t\t\t}\r\n\r\n\t\t\t:host([horizontal]) .input-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: baseline;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-date-range-selector': UmbLogViewerDateRangeSelectorElement;\r\n\t}\r\n}\r\n","import { css, html, LitElement, customElement } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement('umb-log-viewer-too-many-logs-warning')\r\nexport class UmbLogViewerTooManyLogsWarningElement extends LitElement {\r\n\toverride render() {\r\n\t\treturn html`<uui-box id=\"to-many-logs-warning\">\r\n\t\t\t<h3>Unable to view logs</h3>\r\n\t\t\t<p>Today's log file is too large to be viewed and would cause performance problems.</p>\r\n\t\t\t<p>If you need to view the log files, narrow your date range or try opening them manually.</p>\r\n\t\t</uui-box>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-too-many-logs-warning': UmbLogViewerTooManyLogsWarningElement;\r\n\t}\r\n}\r\n","// TODO: I don't feel sure this is good, seems wrong: [NL]\r\nimport '../components/index.js';\r\nimport { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-logviewer-workspace')\r\nexport class UmbLogViewerWorkspaceElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-editor\r\n\t\t\t\theadline=${this.localize.term('treeHeaders_logViewer')}\r\n\t\t\t\t.enforceNoFooter=${true}></umb-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t--umb-log-viewer-debug-color: var(--uui-color-default-emphasis);\r\n\t\t\t\t--umb-log-viewer-information-color: var(--uui-color-positive);\r\n\t\t\t\t--umb-log-viewer-warning-color: var(--uui-color-warning);\r\n\t\t\t\t--umb-log-viewer-error-color: var(--uui-color-danger);\r\n\t\t\t\t--umb-log-viewer-fatal-color: var(--uui-palette-black);\r\n\t\t\t\t--umb-log-viewer-verbose-color: var(--uui-color-current);\r\n\t\t\t}\r\n\r\n\t\t\tuui-tab-group {\r\n\t\t\t\t--uui-tab-divider: var(--uui-color-border);\r\n\t\t\t\tborder-left: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-right: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbLogViewerWorkspaceElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-logviewer-workspace': UmbLogViewerWorkspaceElement;\r\n\t}\r\n}\r\n"],"names":["_logViewerContext","_UmbLogViewerDateRangeSelectorElement_instances","observeStuff_fn","setDates_fn","UmbLogViewerDateRangeSelectorElement","UmbLitElement","__privateAdd","__privateMethod","UMB_APP_LOG_VIEWER_CONTEXT","instance","__privateSet","html","__privateGet","dateRange","input","query","getQuery","qs","toQueryString","path","UmbTextStyles","css","__decorateClass","state","queryAll","property","customElement","UmbLogViewerTooManyLogsWarningElement","LitElement","UmbLogViewerWorkspaceElement"],"mappings":"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"}