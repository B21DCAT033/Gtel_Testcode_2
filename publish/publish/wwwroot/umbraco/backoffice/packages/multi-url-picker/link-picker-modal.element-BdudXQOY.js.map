{"version":3,"file":"link-picker-modal.element-BdudXQOY.js","sources":["../../../src/packages/multi-url-picker/link-picker-modal/link-picker-modal.element.ts"],"sourcesContent":["import type { UmbLinkPickerLink } from './types.js';\r\nimport type {\r\n\tUmbLinkPickerConfig,\r\n\tUmbLinkPickerModalData,\r\n\tUmbLinkPickerModalValue,\r\n} from './link-picker-modal.token.js';\r\nimport { css, customElement, html, nothing, query, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { isUmbracoFolder, UmbMediaTypeStructureRepository } from '@umbraco-cms/backoffice/media-type';\r\nimport { umbBindToValidation, UmbValidationContext } from '@umbraco-cms/backoffice/validation';\r\nimport { umbConfirmModal, UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbDocumentDetailRepository } from '@umbraco-cms/backoffice/document';\r\nimport { UmbMediaDetailRepository } from '@umbraco-cms/backoffice/media';\r\nimport type { UmbInputDocumentElement } from '@umbraco-cms/backoffice/document';\r\nimport type { UmbInputMediaElement } from '@umbraco-cms/backoffice/media';\r\nimport type { UUIBooleanInputEvent, UUIInputElement, UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\ntype UmbInputPickerEvent = CustomEvent & { target: { value?: string } };\r\n\r\n@customElement('umb-link-picker-modal')\r\nexport class UmbLinkPickerModalElement extends UmbModalBaseElement<UmbLinkPickerModalData, UmbLinkPickerModalValue> {\r\n\t#propertyLayoutOrientation: 'horizontal' | 'vertical' = 'vertical';\r\n\r\n\t#validationContext = new UmbValidationContext(this);\r\n\r\n\t@state()\r\n\tprivate _allowedMediaTypeUniques?: Array<string>;\r\n\r\n\t@state()\r\n\tprivate _config: UmbLinkPickerConfig = {\r\n\t\thideAnchor: false,\r\n\t\thideTarget: false,\r\n\t};\r\n\r\n\t@query('umb-input-document')\r\n\tprivate _documentPickerElement?: UmbInputDocumentElement;\r\n\r\n\t@query('umb-input-media')\r\n\tprivate _mediaPickerElement?: UmbInputMediaElement;\r\n\r\n\t@query('#link-anchor', true)\r\n\tprivate _linkAnchorInput?: UUIInputElement;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.data?.config) {\r\n\t\t\tthis._config = this.data.config;\r\n\t\t}\r\n\r\n\t\tif (this.modalContext) {\r\n\t\t\tthis.observe(this.modalContext.size, (size) => {\r\n\t\t\t\tif (size === 'large' || size === 'full') {\r\n\t\t\t\t\tthis.#propertyLayoutOrientation = 'horizontal';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.#getMediaTypes();\r\n\t}\r\n\r\n\tprotected override firstUpdated() {\r\n\t\tthis._linkAnchorInput?.addValidator(\r\n\t\t\t'valueMissing',\r\n\t\t\t() => this.localize.term('linkPicker_modalAnchorValidationMessage'),\r\n\t\t\t() => !this.value.link.url && !this.value.link.queryString,\r\n\t\t);\r\n\t}\r\n\r\n\tasync #getMediaTypes() {\r\n\t\t// Get all the media types, excluding the folders, so that files are selectable media items.\r\n\t\tconst mediaTypeStructureRepository = new UmbMediaTypeStructureRepository(this);\r\n\t\tconst { data: mediaTypes } = await mediaTypeStructureRepository.requestAllowedChildrenOf(null);\r\n\t\tthis._allowedMediaTypeUniques =\r\n\t\t\t(mediaTypes?.items.map((x) => x.unique).filter((x) => x && !isUmbracoFolder(x)) as Array<string>) ?? [];\r\n\t}\r\n\r\n\t#partialUpdateLink(linkObject: Partial<UmbLinkPickerLink>) {\r\n\t\tthis.modalContext?.updateValue({ link: { ...this.value.link, ...linkObject } });\r\n\t}\r\n\r\n\t#onLinkAnchorInput(event: UUIInputEvent) {\r\n\t\tconst query = (event.target.value as string) ?? '';\r\n\t\tif (query.startsWith('#') || query.startsWith('?')) {\r\n\t\t\tthis.#partialUpdateLink({ queryString: query });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (query.includes('=')) {\r\n\t\t\tthis.#partialUpdateLink({ queryString: `?${query}` });\r\n\t\t} else if (query) {\r\n\t\t\tthis.#partialUpdateLink({ queryString: `#${query}` });\r\n\t\t} else {\r\n\t\t\tthis.#partialUpdateLink({ queryString: '' });\r\n\t\t}\r\n\t}\r\n\r\n\t#onLinkTitleInput(event: UUIInputEvent) {\r\n\t\tthis.#partialUpdateLink({ name: event.target.value as string });\r\n\t}\r\n\r\n\t#onLinkTargetInput(event: UUIBooleanInputEvent) {\r\n\t\tthis.#partialUpdateLink({ target: event.target.checked ? '_blank' : undefined });\r\n\t}\r\n\r\n\t#onLinkUrlInput(event: UUIInputEvent) {\r\n\t\tconst url = event.target.value as string;\r\n\r\n\t\tlet name;\r\n\t\tif (url && !this.value.link.name) {\r\n\t\t\tif (URL.canParse(url)) {\r\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst parts = URL.parse(url);\r\n\t\t\t\tname = parts?.hostname ?? url;\r\n\t\t\t} else {\r\n\t\t\t\tname = url;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.#partialUpdateLink({\r\n\t\t\tname: this.value.link.name || name,\r\n\t\t\ttype: 'external',\r\n\t\t\turl,\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onPickerSelection(event: UmbInputPickerEvent, type: 'document' | 'media') {\r\n\t\tlet icon, name, url;\r\n\t\tconst unique = event.target.value;\r\n\r\n\t\tif (unique) {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'document': {\r\n\t\t\t\t\tconst documentRepository = new UmbDocumentDetailRepository(this);\r\n\t\t\t\t\tconst { data: documentData } = await documentRepository.requestByUnique(unique);\r\n\t\t\t\t\tif (documentData) {\r\n\t\t\t\t\t\ticon = documentData.documentType.icon;\r\n\t\t\t\t\t\tname = documentData.variants[0].name;\r\n\t\t\t\t\t\turl = documentData.urls[0]?.url ?? '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'media': {\r\n\t\t\t\t\tconst mediaRepository = new UmbMediaDetailRepository(this);\r\n\t\t\t\t\tconst { data: mediaData } = await mediaRepository.requestByUnique(unique);\r\n\t\t\t\t\tif (mediaData) {\r\n\t\t\t\t\t\ticon = mediaData.mediaType.icon;\r\n\t\t\t\t\t\tname = mediaData.variants[0].name;\r\n\t\t\t\t\t\turl = mediaData.urls[0].url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst link = {\r\n\t\t\ticon,\r\n\t\t\tname: this.value.link.name || name,\r\n\t\t\ttype: unique ? type : undefined,\r\n\t\t\tunique,\r\n\t\t\turl: url ?? this.value.link.url,\r\n\t\t};\r\n\r\n\t\tthis.#partialUpdateLink(link);\r\n\r\n\t\tawait this.#validationContext.validate();\r\n\t}\r\n\r\n\tasync #onResetUrl() {\r\n\t\tif (this.value.link.url) {\r\n\t\t\tawait umbConfirmModal(this, {\r\n\t\t\t\tcolor: 'danger',\r\n\t\t\t\theadline: this.localize.term('linkPicker_resetUrlHeadline'),\r\n\t\t\t\tcontent: this.localize.term('linkPicker_resetUrlMessage'),\r\n\t\t\t\tconfirmLabel: this.localize.term('linkPicker_resetUrlLabel'),\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.#partialUpdateLink({ type: null, url: null });\r\n\t}\r\n\r\n\tasync #onSubmit() {\r\n\t\tawait this.#validationContext.validate();\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#triggerDocumentPicker() {\r\n\t\tthis._documentPickerElement?.shadowRoot?.querySelector('#btn-add')?.dispatchEvent(new Event('click'));\r\n\t}\r\n\r\n\t#triggerMediaPicker() {\r\n\t\tthis._mediaPickerElement?.shadowRoot?.querySelector('#btn-add')?.dispatchEvent(new Event('click'));\r\n\t}\r\n\r\n\t#triggerExternalUrl() {\r\n\t\tthis.#partialUpdateLink({ type: 'external' });\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout\r\n\t\t\t\theadline=${this.localize.term(\r\n\t\t\t\t\tthis.modalContext?.data.isNew ? 'defaultdialogs_addLink' : 'defaultdialogs_updateLink',\r\n\t\t\t\t)}>\r\n\t\t\t\t<uui-box>\r\n\t\t\t\t\t${this.#renderLinkType()} ${this.#renderLinkAnchorInput()} ${this.#renderLinkTitleInput()}\r\n\t\t\t\t\t${this.#renderLinkTargetInput()}\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=${this.localize.term('general_close')} @click=${this._rejectModal}></uui-button>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t\tlabel=${this.localize.term(this.modalContext?.data.isNew ? 'general_add' : 'general_update')}\r\n\t\t\t\t\t\t?disabled=${!this.value.link.type}\r\n\t\t\t\t\t\t@click=${this.#onSubmit}></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkType() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\torientation=${this.#propertyLayoutOrientation}\r\n\t\t\t\tlabel=${this.localize.term('linkPicker_modalSource')}\r\n\t\t\t\tmandatory>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t${this.#renderLinkTypeSelection()} ${this.#renderDocumentPicker()} ${this.#renderMediaPicker()}\r\n\t\t\t\t\t${this.#renderLinkUrlInput()} ${this.#renderLinkUrlInputReadOnly()}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkTypeSelection() {\r\n\t\tif (this.value.link.type) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-button-group>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tdata-mark=\"action:document\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_content')}\r\n\t\t\t\t\t@click=${this.#triggerDocumentPicker}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tdata-mark=\"action:media\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_media')}\r\n\t\t\t\t\t@click=${this.#triggerMediaPicker}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tdata-mark=\"action:external\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\tlabel=${this.localize.term('linkPicker_modalManual')}\r\n\t\t\t\t\t@click=${this.#triggerExternalUrl}></uui-button>\r\n\t\t\t</uui-button-group>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDocumentPicker() {\r\n\t\treturn html`\r\n\t\t\t<umb-input-document\r\n\t\t\t\t?hidden=${!this.value.link.unique || this.value.link.type !== 'document'}\r\n\t\t\t\t.max=${1}\r\n\t\t\t\t.showOpenButton=${true}\r\n\t\t\t\t.value=${this.value.link.unique && this.value.link.type === 'document' ? this.value.link.unique : ''}\r\n\t\t\t\t@change=${(e: UmbInputPickerEvent) => this.#onPickerSelection(e, 'document')}>\r\n\t\t\t</umb-input-document>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMediaPicker() {\r\n\t\treturn html`\r\n\t\t\t<umb-input-media\r\n\t\t\t\t?hidden=${!this.value.link.unique || this.value.link.type !== 'media'}\r\n\t\t\t\t.allowedContentTypeIds=${this._allowedMediaTypeUniques}\r\n\t\t\t\t.max=${1}\r\n\t\t\t\t.value=${this.value.link.unique && this.value.link.type === 'media' ? this.value.link.unique : ''}\r\n\t\t\t\t@change=${(e: UmbInputPickerEvent) => this.#onPickerSelection(e, 'media')}></umb-input-media>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkUrlInput() {\r\n\t\tif (this.value.link.type !== 'external') return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\tdata-mark=\"input:url\"\r\n\t\t\t\tlabel=${this.localize.term('placeholders_enterUrl')}\r\n\t\t\t\tplaceholder=${this.localize.term('placeholders_enterUrl')}\r\n\t\t\t\t.value=${this.value.link.url ?? ''}\r\n\t\t\t\t?disabled=${!!this.value.link.unique}\r\n\t\t\t\t?required=${this._config.hideAnchor}\r\n\t\t\t\t@change=${this.#onLinkUrlInput}\r\n\t\t\t\t${umbBindToValidation(this)}>\r\n\t\t\t\t${when(\r\n\t\t\t\t\t!this.value.link.unique,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<div slot=\"append\">\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tslot=\"append\"\r\n\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_remove')}\r\n\t\t\t\t\t\t\t\t@click=${this.#onResetUrl}>\r\n\t\t\t\t\t\t\t\t<uui-icon name=\"remove\"></uui-icon>\r\n\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkUrlInputReadOnly() {\r\n\t\tif (!this.value.link.unique || !this.value.link.url) return nothing;\r\n\t\treturn html`<uui-input readonly value=${this.value.link.url}></uui-input>`;\r\n\t}\r\n\r\n\t#renderLinkAnchorInput() {\r\n\t\tif (this._config.hideAnchor) return nothing;\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\torientation=${this.#propertyLayoutOrientation}\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_anchorLinkPicker')}>\r\n\t\t\t\t<uui-input\r\n\t\t\t\t\tdata-mark=\"input:anchor\"\r\n\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\tid=\"link-anchor\"\r\n\t\t\t\t\tlabel=${this.localize.term('placeholders_anchor')}\r\n\t\t\t\t\tplaceholder=${this.localize.term('placeholders_anchor')}\r\n\t\t\t\t\t.value=${this.value.link.queryString ?? ''}\r\n\t\t\t\t\t@change=${this.#onLinkAnchorInput}\r\n\t\t\t\t\t${umbBindToValidation(this)}></uui-input>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkTitleInput() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\torientation=${this.#propertyLayoutOrientation}\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_nodeNameLinkPicker')}>\r\n\t\t\t\t<uui-input\r\n\t\t\t\t\tdata-mark=\"input:title\"\r\n\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\tlabel=${this.localize.term('defaultdialogs_nodeNameLinkPicker')}\r\n\t\t\t\t\tplaceholder=${this.localize.term('defaultdialogs_nodeNameLinkPicker')}\r\n\t\t\t\t\t.value=${this.value.link.name ?? ''}\r\n\t\t\t\t\t@change=${this.#onLinkTitleInput}>\r\n\t\t\t\t</uui-input>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLinkTargetInput() {\r\n\t\tif (this._config.hideTarget) return nothing;\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout orientation=${this.#propertyLayoutOrientation} label=${this.localize.term('content_target')}>\r\n\t\t\t\t<uui-toggle\r\n\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\tlabel=${this.localize.term('defaultdialogs_openInNewWindow')}\r\n\t\t\t\t\t.checked=${this.value.link.target === '_blank' ? true : false}\r\n\t\t\t\t\t@change=${this.#onLinkTargetInput}>\r\n\t\t\t\t\t${this.localize.term('defaultdialogs_openInNewWindow')}\r\n\t\t\t\t</uui-toggle>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0 var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\tuui-button-group {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t&[readonly] {\r\n\t\t\t\t\tmargin-top: var(--uui-size-space-2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbLinkPickerModalElement;\r\n\r\nexport { UmbLinkPickerModalElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-link-picker-modal': UmbLinkPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_propertyLayoutOrientation","_validationContext","_UmbLinkPickerModalElement_instances","getMediaTypes_fn","partialUpdateLink_fn","onLinkAnchorInput_fn","onLinkTitleInput_fn","onLinkTargetInput_fn","onLinkUrlInput_fn","onPickerSelection_fn","onResetUrl_fn","onSubmit_fn","triggerDocumentPicker_fn","triggerMediaPicker_fn","triggerExternalUrl_fn","renderLinkType_fn","renderLinkTypeSelection_fn","renderDocumentPicker_fn","renderMediaPicker_fn","renderLinkUrlInput_fn","renderLinkUrlInputReadOnly_fn","renderLinkAnchorInput_fn","renderLinkTitleInput_fn","renderLinkTargetInput_fn","UmbLinkPickerModalElement","UmbModalBaseElement","__privateAdd","UmbValidationContext","size","__privateSet","__privateMethod","html","mediaTypeStructureRepository","UmbMediaTypeStructureRepository","mediaTypes","x","isUmbracoFolder","linkObject","event","query","url","name","type","icon","unique","documentRepository","UmbDocumentDetailRepository","documentData","mediaRepository","UmbMediaDetailRepository","mediaData","link","__privateGet","umbConfirmModal","nothing","umbBindToValidation","when","css","__decorateClass","state","customElement","UmbLinkPickerModalElement$1"],"mappings":"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"}