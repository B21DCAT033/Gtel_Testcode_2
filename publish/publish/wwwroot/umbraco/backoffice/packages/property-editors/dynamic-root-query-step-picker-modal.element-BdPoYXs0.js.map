{"version":3,"file":"dynamic-root-query-step-picker-modal.element-BdPoYXs0.js","sources":["../../../src/packages/property-editors/content-picker/dynamic-root/modals/dynamic-root-query-step-picker-modal.element.ts"],"sourcesContent":["import type { UmbContentPickerDynamicRootQueryStep } from '../../types.js';\r\nimport type { ManifestDynamicRootQueryStep } from '../dynamic-root.extension.js';\r\nimport type { UmbContentPickerDocumentRootQueryStepModalData } from './index.js';\r\nimport { UmbDocumentTypePickerInputContext } from '@umbraco-cms/backoffice/document-type';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { html, customElement, state, ifDefined, repeat } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement('umb-dynamic-root-query-step-picker-modal')\r\nexport class UmbDynamicRootQueryStepPickerModalModalElement extends UmbModalBaseElement<UmbContentPickerDocumentRootQueryStepModalData> {\r\n\t@state()\r\n\tprivate _querySteps: Array<ManifestDynamicRootQueryStep> = [];\r\n\r\n\t#documentTypePickerContext = new UmbDocumentTypePickerInputContext(this);\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.data) {\r\n\t\t\tthis._querySteps = this.data.items;\r\n\t\t}\r\n\t}\r\n\r\n\t#choose(item: ManifestDynamicRootQueryStep) {\r\n\t\tthis.#openDocumentTypePicker(item.meta.queryStepAlias);\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\tasync #openDocumentTypePicker(alias: string) {\r\n\t\tawait this.#documentTypePickerContext.openPicker({\r\n\t\t\thideTreeRoot: true,\r\n\t\t\tpickableFilter: (x) => x.isElement === false,\r\n\t\t});\r\n\r\n\t\tconst selectedItems = this.#documentTypePickerContext.getSelection();\r\n\r\n\t\tthis.#submit({\r\n\t\t\tunique: UmbId.new(),\r\n\t\t\talias: alias,\r\n\t\t\tanyOfDocTypeKeys: selectedItems,\r\n\t\t});\r\n\t}\r\n\r\n\t#submit(value: UmbContentPickerDynamicRootQueryStep) {\r\n\t\tthis.modalContext?.setValue(value);\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('dynamicRoot_pickDynamicRootQueryStepTitle')}>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<uui-ref-list>\r\n\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\tthis._querySteps,\r\n\t\t\t\t\t\t\t\t(item) => item.alias,\r\n\t\t\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t\t\t<umb-ref-item\r\n\t\t\t\t\t\t\t\t\t\tname=${ifDefined(item.meta.label)}\r\n\t\t\t\t\t\t\t\t\t\tdetail=${ifDefined(item.meta.description)}\r\n\t\t\t\t\t\t\t\t\t\ticon=${ifDefined(item.meta.icon)}\r\n\t\t\t\t\t\t\t\t\t\t@open=${() => this.#choose(item)}></umb-ref-item>\r\n\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-ref-list>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button @click=${this.#close} look=\"default\" label=\"${this.localize.term('general_close')}\"></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbDynamicRootQueryStepPickerModalModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dynamic-root-query-step-picker-modal': UmbDynamicRootQueryStepPickerModalModalElement;\r\n\t}\r\n}\r\n"],"names":["_documentTypePickerContext","_UmbDynamicRootQueryStepPickerModalModalElement_instances","choose_fn","close_fn","openDocumentTypePicker_fn","submit_fn","UmbDynamicRootQueryStepPickerModalModalElement","UmbModalBaseElement","__privateAdd","UmbDocumentTypePickerInputContext","html","repeat","item","ifDefined","__privateMethod","alias","__privateGet","x","selectedItems","UmbId","value","__decorateClass","state","customElement","UmbDynamicRootQueryStepPickerModalModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AASa,IAAAC,IAAN,cAA6DC,EAAoE;AAAA,EAAjI,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAP,CAAA,GAEN,KAAQ,cAAmD,CAAC,GAE/BO,EAAA,MAAAR,GAAA,IAAIS,EAAkC,IAAI,CAAA;AAAA,EAAA;AAAA,EAE9D,oBAAoB;AAC5B,UAAM,kBAAkB,GAEpB,KAAK,SACH,KAAA,cAAc,KAAK,KAAK;AAAA,EAC9B;AAAA,EA+BQ,SAAS;AACV,WAAAC;AAAA,+BACsB,KAAK,SAAS,KAAK,2CAA2C,CAAC;AAAA;AAAA;AAAA;AAAA,SAIrFC;AAAA,MACD,KAAK;AAAA,MACL,CAACC,MAASA,EAAK;AAAA,MACf,CAACA,MAASF;AAAA;AAAA,iBAEDG,EAAUD,EAAK,KAAK,KAAK,CAAC;AAAA,mBACxBC,EAAUD,EAAK,KAAK,WAAW,CAAC;AAAA,iBAClCC,EAAUD,EAAK,KAAK,IAAI,CAAC;AAAA,kBACxB,MAAME,EAAA,MAAKb,GAALC,CAAA,EAAA,KAAA,MAAaU,CAAK,CAAA;AAAA;AAAA,IAElC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKkBE,QAAKb,GAAME,CAAA,CAAA,0BAA0B,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA;AAAA,EAAA;AAKlG;AAhECH,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAcNC,IAAO,SAACU,GAAoC;AACtC,EAAAE,EAAA,MAAAb,GAAAG,CAAA,EAAL,KAA6B,MAAAQ,EAAK,KAAK,cAAA;AACxC;AAEAT,IAAM,WAAG;AACR,OAAK,cAAc,OAAO;AAC3B;AAEMC,IAAuB,eAACW,GAAe;AACtC,QAAAC,EAAA,MAAKhB,GAA2B,WAAW;AAAA,IAChD,cAAc;AAAA,IACd,gBAAgB,CAACiB,MAAMA,EAAE,cAAc;AAAA,EAAA,CACvC;AAEK,QAAAC,IAAgBF,EAAK,MAAAhB,CAAA,EAA2B,aAAa;AAEnE,EAAAc,EAAA,MAAKb,MAAL,KAAa,MAAA;AAAA,IACZ,QAAQkB,EAAM,IAAI;AAAA,IAClB,OAAAJ;AAAA,IACA,kBAAkBG;AAAA,EAAA,CACnB;AACD;AAEAb,IAAO,SAACe,GAA6C;AAC/C,OAAA,cAAc,SAASA,CAAK,GACjC,KAAK,cAAc,OAAO;AAC3B;AAtCQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKhB,EAEJ,WAAA,eAAA,CAAA;AAFIA,IAANe,EAAA;AAAA,EADNE,EAAc,0CAA0C;AAAA,GAC5CjB,CAAA;AAsEb,MAAAkB,IAAelB;"}