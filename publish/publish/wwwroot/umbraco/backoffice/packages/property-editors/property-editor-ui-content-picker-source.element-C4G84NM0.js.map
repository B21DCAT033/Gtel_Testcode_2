{"version":3,"file":"property-editor-ui-content-picker-source.element-C4G84NM0.js","sources":["../../../src/packages/property-editors/content-picker/dynamic-root/modals/index.ts","../../../src/packages/property-editors/content-picker/dynamic-root/components/input-content-picker-document-root.element.ts","../../../src/packages/property-editors/content-picker/config/source-content/input-content-picker-source.element.ts","../../../src/packages/property-editors/content-picker/config/source-content/property-editor-ui-content-picker-source.element.ts"],"sourcesContent":["import type { ManifestDynamicRootOrigin, ManifestDynamicRootQueryStep } from '../dynamic-root.extension.js';\r\nimport {\r\n\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL_ALIAS,\r\n\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL_ALIAS,\r\n} from './constants.js';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport interface UmbContentPickerDocumentRootOriginModalData {\r\n\titems: Array<ManifestDynamicRootOrigin>;\r\n}\r\n\r\nexport interface UmbContentPickerDocumentRootQueryStepModalData {\r\n\titems: Array<ManifestDynamicRootQueryStep>;\r\n}\r\n\r\nexport const UMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL =\r\n\tnew UmbModalToken<UmbContentPickerDocumentRootOriginModalData>(\r\n\t\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL_ALIAS,\r\n\t\t{\r\n\t\t\tmodal: {\r\n\t\t\t\ttype: 'sidebar',\r\n\t\t\t\tsize: 'small',\r\n\t\t\t},\r\n\t\t},\r\n\t);\r\n\r\nexport const UMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL =\r\n\tnew UmbModalToken<UmbContentPickerDocumentRootQueryStepModalData>(\r\n\t\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL_ALIAS,\r\n\t\t{\r\n\t\t\tmodal: {\r\n\t\t\t\ttype: 'sidebar',\r\n\t\t\t\tsize: 'small',\r\n\t\t\t},\r\n\t\t},\r\n\t);\r\n","import type { UmbContentPickerDynamicRoot, UmbContentPickerDynamicRootQueryStep } from '../../types.js';\r\nimport {\r\n\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL,\r\n\tUMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL,\r\n} from '../modals/index.js';\r\nimport type { ManifestDynamicRootOrigin, ManifestDynamicRootQueryStep } from '../dynamic-root.extension.js';\r\nimport { html, css, customElement, property, ifDefined, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbSorterController } from '@umbraco-cms/backoffice/sorter';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbModalContext } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\n\r\nconst elementName = 'umb-input-content-picker-document-root';\r\n@customElement(elementName)\r\nexport class UmbInputContentPickerDocumentRootElement extends UmbFormControlMixin<\r\n\tstring | undefined,\r\n\ttypeof UmbLitElement\r\n>(UmbLitElement) {\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _originManifests: Array<ManifestDynamicRootOrigin> = [];\r\n\r\n\t@state()\r\n\tprivate _queryStepManifests: Array<ManifestDynamicRootQueryStep> = [];\r\n\r\n\t@property({ attribute: false })\r\n\tdata?: UmbContentPickerDynamicRoot;\r\n\r\n\t#dynamicRootOrigin?: { label: string; icon: string; description?: string };\r\n\r\n\t#modalContext?: typeof UMB_MODAL_MANAGER_CONTEXT.TYPE;\r\n\r\n\t#openModal?: UmbModalContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n\t\t\tthis.#modalContext = instance;\r\n\t\t});\r\n\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('dynamicRootOrigin'),\r\n\t\t\t(originManifests: Array<ManifestDynamicRootOrigin>) => {\r\n\t\t\t\tthis._originManifests = originManifests;\r\n\t\t\t},\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('dynamicRootQueryStep'),\r\n\t\t\t(queryStepManifests: Array<ManifestDynamicRootQueryStep>) => {\r\n\t\t\t\tthis._queryStepManifests = queryStepManifests;\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tthis.#updateDynamicRootOrigin(this.data);\r\n\t\tthis.#updateDynamicRootQuerySteps(this.data?.querySteps);\r\n\t}\r\n\r\n\t#sorter = new UmbSorterController<UmbContentPickerDynamicRootQueryStep>(this, {\r\n\t\tgetUniqueOfElement: (element) => {\r\n\t\t\treturn element.id;\r\n\t\t},\r\n\t\tgetUniqueOfModel: (modelEntry) => {\r\n\t\t\treturn modelEntry.unique;\r\n\t\t},\r\n\t\tidentifier: 'Umb.SorterIdentifier.InputDynamicRoot',\r\n\t\titemSelector: 'uui-ref-node',\r\n\t\tcontainerSelector: '#query-steps',\r\n\t\tonChange: ({ model }) => {\r\n\t\t\tif (this.data?.querySteps) {\r\n\t\t\t\tconst querySteps = model;\r\n\t\t\t\tthis.#updateDynamicRootQuerySteps(querySteps);\r\n\t\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\r\n\t#openDynamicRootOriginPicker() {\r\n\t\tthis.#openModal = this.#modalContext?.open(this, UMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL, {\r\n\t\t\tdata: { items: this._originManifests },\r\n\t\t});\r\n\t\tthis.#openModal?.onSubmit().then((data: UmbContentPickerDynamicRoot) => {\r\n\t\t\tconst existingData = { ...this.data };\r\n\t\t\texistingData.originKey = undefined;\r\n\t\t\tthis.data = { ...existingData, ...data };\r\n\t\t\tthis.#updateDynamicRootOrigin(this.data);\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t});\r\n\t}\r\n\r\n\t#openDynamicRootQueryStepPicker() {\r\n\t\tthis.#openModal = this.#modalContext?.open(this, UMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL, {\r\n\t\t\tdata: { items: this._queryStepManifests },\r\n\t\t});\r\n\t\tthis.#openModal?.onSubmit().then((step) => {\r\n\t\t\tif (this.data) {\r\n\t\t\t\tconst querySteps = [...(this.data.querySteps ?? []), step];\r\n\t\t\t\tthis.#updateDynamicRootQuerySteps(querySteps);\r\n\t\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t#updateDynamicRootOrigin(data?: UmbContentPickerDynamicRoot) {\r\n\t\tif (!data) return;\r\n\t\tconst origin = this._originManifests.find((item) => item.meta.originAlias === data.originAlias)?.meta;\r\n\t\tthis.#dynamicRootOrigin = {\r\n\t\t\tlabel: origin?.label ?? data.originAlias,\r\n\t\t\ticon: origin?.icon ?? 'icon-wand',\r\n\t\t\tdescription: data.originKey,\r\n\t\t};\r\n\t}\r\n\r\n\t#updateDynamicRootQuerySteps(querySteps?: Array<UmbContentPickerDynamicRootQueryStep>) {\r\n\t\tif (!this.data) return;\r\n\r\n\t\tif (querySteps) {\r\n\t\t\t// NOTE: Ensure that the `unique` ID is populated for each query step. [LK]\r\n\t\t\tquerySteps = querySteps.map((item) => (item.unique ? item : { ...item, unique: UmbId.new() }));\r\n\t\t}\r\n\r\n\t\tthis.#sorter?.setModel(querySteps ?? []);\r\n\t\tthis.data = { ...this.data, ...{ querySteps } };\r\n\t}\r\n\r\n\t#getQueryStepMeta(item: UmbContentPickerDynamicRootQueryStep): {\r\n\t\tunique: string;\r\n\t\tlabel: string;\r\n\t\ticon: string;\r\n\t\tdescription?: string;\r\n\t} {\r\n\t\tconst step = this._queryStepManifests.find((step) => step.meta.queryStepAlias === item.alias)?.meta;\r\n\t\tconst docTypes = item.anyOfDocTypeKeys?.join(', ');\r\n\t\tconst description = docTypes ? this.localize.term('dynamicRoot_queryStepTypes') + docTypes : undefined;\r\n\r\n\t\treturn {\r\n\t\t\tunique: item.unique,\r\n\t\t\tlabel: step?.label ?? item.alias,\r\n\t\t\ticon: step?.icon ?? 'icon-lab',\r\n\t\t\tdescription,\r\n\t\t};\r\n\t}\r\n\r\n\t#removeDynamicRootQueryStep(item: UmbContentPickerDynamicRootQueryStep) {\r\n\t\tif (this.data?.querySteps) {\r\n\t\t\tconst index = this.data.querySteps.indexOf(item);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tconst querySteps = [...this.data.querySteps];\r\n\t\t\t\tquerySteps.splice(index, 1);\r\n\t\t\t\tthis.#updateDynamicRootQuerySteps(querySteps);\r\n\t\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t#clearDynamicRootQuery() {\r\n\t\tthis.data = undefined;\r\n\t\tthis.#dynamicRootOrigin = undefined;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this.#renderAddOriginButton()}\r\n\t\t\t<uui-ref-list>${this.#renderOrigin()}</uui-ref-list>\r\n\t\t\t<uui-ref-list id=\"query-steps\">${this.#renderQuerySteps()}</uui-ref-list>\r\n\t\t\t${this.#renderAddQueryStepButton()} ${this.#renderClearButton()}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAddOriginButton() {\r\n\t\tif (this.data?.originAlias) return;\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tclass=\"add-button\"\r\n\t\t\t\t@click=${this.#openDynamicRootOriginPicker}\r\n\t\t\t\tlabel=${this.localize.term('contentPicker_defineDynamicRoot')}\r\n\t\t\t\tlook=\"placeholder\"></uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderOrigin() {\r\n\t\tif (!this.#dynamicRootOrigin) return;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node\r\n\t\t\t\tstandalone\r\n\t\t\t\tname=${this.#dynamicRootOrigin.label}\r\n\t\t\t\tdetail=${ifDefined(this.#dynamicRootOrigin.description)}>\r\n\t\t\t\t<umb-icon slot=\"icon\" name=${ifDefined(this.#dynamicRootOrigin.icon)}></umb-icon>\r\n\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t@click=${this.#openDynamicRootOriginPicker}\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('general_edit')}\"></uui-button>\r\n\t\t\t\t</uui-action-bar>\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderClearButton() {\r\n\t\tif (!this.#dynamicRootOrigin) return;\r\n\t\treturn html`\r\n\t\t\t<uui-button @click=${this.#clearDynamicRootQuery}>${this.localize.term('buttons_clearSelection')}</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderQuerySteps() {\r\n\t\tif (!this.data?.querySteps) return;\r\n\t\treturn repeat(\r\n\t\t\tthis.data.querySteps,\r\n\t\t\t(item) => item.unique,\r\n\t\t\t(item) => this.#renderQueryStep(item),\r\n\t\t);\r\n\t}\r\n\r\n\t#renderQueryStep(item: UmbContentPickerDynamicRootQueryStep) {\r\n\t\tif (!item.alias) return;\r\n\t\tconst step = this.#getQueryStepMeta(item);\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node standalone id=${step.unique} name=${step.label} detail=\"${ifDefined(step.description)}\">\r\n\t\t\t\t<umb-icon slot=\"icon\" name=${step.icon}></umb-icon>\r\n\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t@click=${() => this.#removeDynamicRootQueryStep(item)}\r\n\t\t\t\t\t\tlabel=${this.localize.term('general_remove')}></uui-button>\r\n\t\t\t\t</uui-action-bar>\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAddQueryStepButton() {\r\n\t\tif (!this.#dynamicRootOrigin) return;\r\n\t\treturn html` <uui-button\r\n\t\t\tclass=\"add-button\"\r\n\t\t\t@click=${this.#openDynamicRootQueryStepPicker}\r\n\t\t\tlabel=${this.localize.term('dynamicRoot_addQueryStep')}\r\n\t\t\tlook=\"placeholder\"></uui-button>`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t.add-button {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-ref-node[drag-placeholder] {\r\n\t\t\t\topacity: 0.2;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbInputContentPickerDocumentRootElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t[elementName]: UmbInputContentPickerDocumentRootElement;\r\n\t}\r\n}\r\n","import type { UmbContentPickerDynamicRoot, UmbContentPickerSourceType } from '../../types.js';\r\nimport type { UmbInputContentPickerDocumentRootElement } from '../../dynamic-root/components/input-content-picker-document-root.element.js';\r\nimport { html, customElement, property, css, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUISelectEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UUIFormControlMixin } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\nimport '../../dynamic-root/components/input-content-picker-document-root.element.js';\r\n\r\n@customElement('umb-input-content-picker-source')\r\nexport class UmbInputContentPickerSourceElement extends UUIFormControlMixin(UmbLitElement, '') {\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t#type: UmbContentPickerSourceType = 'content';\r\n\r\n\t@property()\r\n\tpublic set type(value: UmbContentPickerSourceType) {\r\n\t\tif (value === undefined) {\r\n\t\t\tvalue = this.#type;\r\n\t\t}\r\n\r\n\t\tconst oldValue = this.#type;\r\n\r\n\t\tthis._options = this._options.map((option) =>\r\n\t\t\toption.value === value ? { ...option, selected: true } : { ...option, selected: false },\r\n\t\t);\r\n\r\n\t\tthis.#type = value;\r\n\r\n\t\tthis.requestUpdate('type', oldValue);\r\n\t}\r\n\tpublic get type(): UmbContentPickerSourceType {\r\n\t\treturn this.#type;\r\n\t}\r\n\r\n\t@property({ attribute: 'node-id' })\r\n\tnodeId?: string;\r\n\r\n\t@property({ attribute: false })\r\n\tdynamicRoot?: UmbContentPickerDynamicRoot;\r\n\r\n\t@state()\r\n\t_options: Array<Option> = [\r\n\t\t{ value: 'content', name: 'Content' },\r\n\t\t{ value: 'media', name: 'Media' },\r\n\t\t{ value: 'member', name: 'Members' },\r\n\t];\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\t// HACK: Workaround consolidating the old content-picker and dynamic-root. [LK:2024-01-24]\r\n\t\tif (this.nodeId && !this.dynamicRoot) {\r\n\t\t\tthis.dynamicRoot = { originAlias: 'ByKey', originKey: this.nodeId, querySteps: [] };\r\n\t\t}\r\n\t}\r\n\r\n\t#onContentTypeChange(event: UUISelectEvent) {\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tthis.type = event.target.value as UmbContentPickerSourceType;\r\n\r\n\t\tthis.nodeId = undefined;\r\n\t\tthis.dynamicRoot = undefined;\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#onDocumentRootChange(event: CustomEvent & { target: UmbInputContentPickerDocumentRootElement }) {\r\n\t\tswitch (this.type) {\r\n\t\t\tcase 'content':\r\n\t\t\t\tthis.dynamicRoot = event.target.data;\r\n\r\n\t\t\t\t// HACK: Workaround consolidating the old content-picker and dynamic-root. [LK:2024-01-24]\r\n\t\t\t\tif (this.dynamicRoot?.originAlias === 'ByKey') {\r\n\t\t\t\t\tif (!this.dynamicRoot.querySteps || this.dynamicRoot.querySteps?.length === 0) {\r\n\t\t\t\t\t\tthis.nodeId = this.dynamicRoot.originKey;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.nodeId = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.nodeId) {\r\n\t\t\t\t\tthis.nodeId = undefined;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'media':\r\n\t\t\tcase 'member':\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-input-dropdown-list\r\n\t\t\t\t@change=${this.#onContentTypeChange}\r\n\t\t\t\t.options=${this._options}></umb-input-dropdown-list>\r\n\t\t\t${this.#renderSourcePicker()}`;\r\n\t}\r\n\r\n\t#renderSourcePicker() {\r\n\t\tswitch (this.type) {\r\n\t\t\tcase 'content':\r\n\t\t\t\treturn this.#renderDocumentSourcePicker();\r\n\t\t\tcase 'media':\r\n\t\t\tcase 'member':\r\n\t\t\tdefault:\r\n\t\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderDocumentSourcePicker() {\r\n\t\treturn html`\r\n\t\t\t<umb-input-content-picker-document-root .data=${this.dynamicRoot} @change=${this.#onDocumentRootChange}>\r\n\t\t\t</umb-input-content-picker-document-root>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-4);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputContentPickerSourceElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-content-picker-source': UmbInputContentPickerSourceElement;\r\n\t}\r\n}\r\n","import type { UmbContentPickerSource } from '../../types.js';\r\nimport type { UmbInputContentPickerSourceElement } from './input-content-picker-source.element.js';\r\nimport {\r\n\ttype UmbPropertyEditorUiElement,\r\n\ttype UmbPropertyEditorConfigCollection,\r\n\tUmbPropertyValueChangeEvent,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { html, customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n// import of local component\r\nimport './input-content-picker-source.element.js';\r\n\r\n/**\r\n * @element umb-property-editor-ui-content-picker-source\r\n */\r\n@customElement('umb-property-editor-ui-content-picker-source')\r\nexport class UmbPropertyEditorUIContentPickerSourceElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@property({ type: Object })\r\n\tvalue?: UmbContentPickerSource;\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic config?: UmbPropertyEditorConfigCollection;\r\n\r\n\t#onChange(event: CustomEvent) {\r\n\t\tconst target = event.target as UmbInputContentPickerSourceElement;\r\n\r\n\t\tthis.value = {\r\n\t\t\ttype: target.type,\r\n\t\t\tid: target.nodeId,\r\n\t\t\tdynamicRoot: target.dynamicRoot,\r\n\t\t};\r\n\r\n\t\tthis.dispatchEvent(new UmbPropertyValueChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-input-content-picker-source\r\n\t\t\t@change=${this.#onChange}\r\n\t\t\t.type=${this.value?.type ?? 'content'}\r\n\t\t\t.nodeId=${this.value?.id}\r\n\t\t\t.dynamicRoot=${this.value?.dynamicRoot}></umb-input-content-picker-source>`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIContentPickerSourceElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-content-picker-source': UmbPropertyEditorUIContentPickerSourceElement;\r\n\t}\r\n}\r\n"],"names":["UMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL","UmbModalToken","UMB_CONTENT_PICKER_DOCUMENT_ROOT_ORIGIN_PICKER_MODAL_ALIAS","UMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL","UMB_CONTENT_PICKER_DOCUMENT_ROOT_QUERY_STEP_PICKER_MODAL_ALIAS","_dynamicRootOrigin","_modalContext","_openModal","_sorter","_UmbInputContentPickerDocumentRootElement_instances","openDynamicRootOriginPicker_fn","openDynamicRootQueryStepPicker_fn","updateDynamicRootOrigin_fn","updateDynamicRootQuerySteps_fn","getQueryStepMeta_fn","removeDynamicRootQueryStep_fn","clearDynamicRootQuery_fn","renderAddOriginButton_fn","renderOrigin_fn","renderClearButton_fn","renderQuerySteps_fn","renderQueryStep_fn","renderAddQueryStepButton_fn","elementName","UmbInputContentPickerDocumentRootElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UmbSorterController","element","modelEntry","model","querySteps","__privateMethod","UmbChangeEvent","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","umbExtensionsRegistry","originManifests","queryStepManifests","html","__privateGet","data","existingData","step","origin","item","UmbId","docTypes","description","index","ifDefined","repeat","css","__decorateClass","state","property","customElement","_type","_UmbInputContentPickerSourceElement_instances","onContentTypeChange_fn","onDocumentRootChange_fn","renderSourcePicker_fn","renderDocumentSourcePicker_fn","UmbInputContentPickerSourceElement","UUIFormControlMixin","value","oldValue","option","event","nothing","_UmbPropertyEditorUIContentPickerSourceElement_instances","onChange_fn","UmbPropertyEditorUIContentPickerSourceElement","target","UmbPropertyValueChangeEvent","UmbPropertyEditorUIContentPickerSourceElement$1"],"mappings":"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"}