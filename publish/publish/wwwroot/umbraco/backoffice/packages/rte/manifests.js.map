{"version":3,"file":"manifests.js","sources":["../../../src/packages/rte/Umbraco.RichText.ts","../../../src/packages/rte/property-value-resolver/rte-block-value-resolver.api.ts","../../../src/packages/rte/property-value-resolver/manifest.ts","../../../src/packages/rte/manifests.ts"],"sourcesContent":["import type { ManifestPropertyEditorSchema } from '@umbraco-cms/backoffice/property-editor';\r\n\r\nexport const manifest: ManifestPropertyEditorSchema = {\r\n\ttype: 'propertyEditorSchema',\r\n\tname: 'Rich Text',\r\n\talias: 'Umbraco.RichText',\r\n\tmeta: {\r\n\t\tdefaultPropertyEditorUiAlias: 'Umb.PropertyEditorUi.Tiptap',\r\n\t\tsettings: {\r\n\t\t\tproperties: [\r\n\t\t\t\t{\r\n\t\t\t\t\talias: 'blocks',\r\n\t\t\t\t\tlabel: '#rte_config_blocks',\r\n\t\t\t\t\tdescription: '{#rte_config_blocks_description}',\r\n\t\t\t\t\tpropertyEditorUiAlias: 'Umb.PropertyEditorUi.BlockRteTypeConfiguration',\r\n\t\t\t\t\tweight: 80,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\talias: 'mediaParentId',\r\n\t\t\t\t\tlabel: '#rte_config_mediaParentId',\r\n\t\t\t\t\tdescription: '{#rte_config_mediaParentId_description}',\r\n\t\t\t\t\tpropertyEditorUiAlias: 'Umb.PropertyEditorUi.MediaEntityPicker',\r\n\t\t\t\t\tconfig: [{ alias: 'validationLimit', value: { min: 0, max: 1 } }],\r\n\t\t\t\t\tweight: 90,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\talias: 'ignoreUserStartNodes',\r\n\t\t\t\t\tlabel: '#rte_config_ignoreUserStartNodes',\r\n\t\t\t\t\tpropertyEditorUiAlias: 'Umb.PropertyEditorUi.Toggle',\r\n\t\t\t\t\tweight: 100,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t},\r\n};\r\n","import type { UmbPropertyEditorRteValueType } from '../types.js';\r\nimport {\r\n\tUmbBlockValueResolver,\r\n\ttype UmbBlockDataValueModel,\r\n\ttype UmbBlockExposeModel,\r\n} from '@umbraco-cms/backoffice/block';\r\nimport type { UmbElementValueModel } from '@umbraco-cms/backoffice/content';\r\n\r\nexport class UmbRteBlockValueResolver extends UmbBlockValueResolver<UmbPropertyEditorRteValueType> {\r\n\tasync processValues(\r\n\t\tproperty: UmbElementValueModel<UmbPropertyEditorRteValueType>,\r\n\t\tvaluesCallback: (values: Array<UmbBlockDataValueModel>) => Promise<Array<UmbBlockDataValueModel> | undefined>,\r\n\t) {\r\n\t\tif (property.value) {\r\n\t\t\treturn {\r\n\t\t\t\t...property,\r\n\t\t\t\tvalue: {\r\n\t\t\t\t\t...property.value,\r\n\t\t\t\t\tblocks: await this._processValueBlockData(property.value.blocks, valuesCallback),\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn property;\r\n\t}\r\n\r\n\tasync processVariants(\r\n\t\tproperty: UmbElementValueModel<UmbPropertyEditorRteValueType>,\r\n\t\tvariantsCallback: (values: Array<UmbBlockExposeModel>) => Promise<Array<UmbBlockExposeModel> | undefined>,\r\n\t) {\r\n\t\tif (property.value) {\r\n\t\t\treturn {\r\n\t\t\t\t...property,\r\n\t\t\t\tvalue: {\r\n\t\t\t\t\t...property.value,\r\n\t\t\t\t\tblocks: await this._processVariantBlockData(property.value.blocks, variantsCallback),\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn property;\r\n\t}\r\n}\r\n","import { UMB_BLOCK_RTE_PROPERTY_EDITOR_SCHEMA_ALIAS } from '../constants.js';\r\nimport { UmbRteBlockValueResolver } from './rte-block-value-resolver.api.js';\r\nimport type { ManifestPropertyValueResolver } from '@umbraco-cms/backoffice/property';\r\n\r\nexport const manifest: ManifestPropertyValueResolver = {\r\n\ttype: 'propertyValueResolver',\r\n\talias: 'Umb.PropertyValueResolver.RichTextBlocks',\r\n\tname: 'Block Value Resolver',\r\n\tapi: UmbRteBlockValueResolver,\r\n\tforEditorAlias: UMB_BLOCK_RTE_PROPERTY_EDITOR_SCHEMA_ALIAS,\r\n};\r\n","import { manifest as schemaManifest } from './Umbraco.RichText.js';\r\nimport { manifest as blockRtePropertyValueResolver } from './property-value-resolver/manifest.js';\r\nimport type { UmbExtensionManifestKind } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nexport const manifests: Array<UmbExtensionManifest | UmbExtensionManifestKind> = [\r\n\tschemaManifest,\r\n\tblockRtePropertyValueResolver,\r\n];\r\n"],"names":["manifest","UmbRteBlockValueResolver","UmbBlockValueResolver","property","valuesCallback","variantsCallback","UMB_BLOCK_RTE_PROPERTY_EDITOR_SCHEMA_ALIAS","manifests","schemaManifest","blockRtePropertyValueResolver"],"mappings":";;AAEO,MAAMA,IAAyC;AAAA,EACrD,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,IACL,8BAA8B;AAAA,IAC9B,UAAU;AAAA,MACT,YAAY;AAAA,QACX;AAAA,UACC,OAAO;AAAA,UACP,OAAO;AAAA,UACP,aAAa;AAAA,UACb,uBAAuB;AAAA,UACvB,QAAQ;AAAA,QACT;AAAA,QACA;AAAA,UACC,OAAO;AAAA,UACP,OAAO;AAAA,UACP,aAAa;AAAA,UACb,uBAAuB;AAAA,UACvB,QAAQ,CAAC,EAAE,OAAO,mBAAmB,OAAO,EAAE,KAAK,GAAG,KAAK,EAAE,GAAG;AAAA,UAChE,QAAQ;AAAA,QACT;AAAA,QACA;AAAA,UACC,OAAO;AAAA,UACP,OAAO;AAAA,UACP,uBAAuB;AAAA,UACvB,QAAQ;AAAA,QAAA;AAAA,MACT;AAAA,IACD;AAAA,EACD;AAEF;AC1BO,MAAMC,UAAiCC,EAAqD;AAAA,EAClG,MAAM,cACLC,GACAC,GACC;AACD,WAAID,EAAS,QACL;AAAA,MACN,GAAGA;AAAA,MACH,OAAO;AAAA,QACN,GAAGA,EAAS;AAAA,QACZ,QAAQ,MAAM,KAAK,uBAAuBA,EAAS,MAAM,QAAQC,CAAc;AAAA,MAAA;AAAA,IAEjF,IAEMD;AAAA,EAAA;AAAA,EAGR,MAAM,gBACLA,GACAE,GACC;AACD,WAAIF,EAAS,QACL;AAAA,MACN,GAAGA;AAAA,MACH,OAAO;AAAA,QACN,GAAGA,EAAS;AAAA,QACZ,QAAQ,MAAM,KAAK,yBAAyBA,EAAS,MAAM,QAAQE,CAAgB;AAAA,MAAA;AAAA,IAErF,IAEMF;AAAA,EAAA;AAET;ACpCO,MAAMH,IAA0C;AAAA,EACtD,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,KAAKC;AAAA,EACL,gBAAgBK;AACjB,GCNaC,IAAoE;AAAA,EAChFC;AAAAA,EACAC;AACD;"}