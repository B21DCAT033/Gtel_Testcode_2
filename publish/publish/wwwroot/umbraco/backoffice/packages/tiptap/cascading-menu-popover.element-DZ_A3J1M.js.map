{"version":3,"file":"cascading-menu-popover.element-DZ_A3J1M.js","sources":["../../../src/packages/tiptap/components/cascading-menu-popover/cascading-menu-popover.element.ts"],"sourcesContent":["import { css, customElement, html, property, repeat, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UUIPopoverContainerElement } from '@umbraco-cms/backoffice/external/uui';\r\n\r\nexport type UmbCascadingMenuItem = {\r\n\tunique: string;\r\n\tlabel: string;\r\n\ticon?: string;\r\n\titems?: Array<UmbCascadingMenuItem>;\r\n\telement?: HTMLElement;\r\n\tseparatorAfter?: boolean;\r\n\texecute?: () => void;\r\n\tisActive?: () => boolean;\r\n};\r\n\r\n@customElement('umb-cascading-menu-popover')\r\nexport class UmbCascadingMenuPopoverElement extends UUIPopoverContainerElement {\r\n\t@property({ type: Array })\r\n\titems?: Array<UmbCascadingMenuItem>;\r\n\r\n\t#getPopoverById(popoverId: string): UUIPopoverContainerElement | null | undefined {\r\n\t\treturn this.shadowRoot?.querySelector(`#${popoverId}`) as UUIPopoverContainerElement;\r\n\t}\r\n\r\n\t#onMouseEnter(item: UmbCascadingMenuItem) {\r\n\t\tif (!item.items?.length) return;\r\n\r\n\t\tconst popover = this.#getPopoverById(item.unique);\r\n\t\tif (!popover) return;\r\n\r\n\t\t// TODO: This ignorer is just neede for JSON SCHEMA TO WORK, As its not updated with latest TS jet.\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\tpopover.showPopover();\r\n\t}\r\n\r\n\t#onMouseLeave(item: UmbCascadingMenuItem) {\r\n\t\tconst popover = this.#getPopoverById(item.unique);\r\n\t\tif (!popover) return;\r\n\r\n\t\t// TODO: This ignorer is just neede for JSON SCHEMA TO WORK, As its not updated with latest TS jet.\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\tpopover.hidePopover();\r\n\t}\r\n\r\n\t#onClick(item: UmbCascadingMenuItem) {\r\n\t\titem.execute?.();\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.#onMouseLeave(item);\r\n\t\t}, 100);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-scroll-container>\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis.items?.length,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\tthis.items!,\r\n\t\t\t\t\t\t\t(item) => item.unique,\r\n\t\t\t\t\t\t\t(item) => this.#renderItem(item),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t${super.render()}\r\n\t\t\t\t\t`,\r\n\t\t\t\t\t() => super.render(),\r\n\t\t\t\t)}\r\n\t\t\t</uui-scroll-container>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: UmbCascadingMenuItem) {\r\n\t\tconst element = item.element;\r\n\t\tif (element) {\r\n\t\t\telement.setAttribute('popovertarget', item.unique);\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div @mouseenter=${() => this.#onMouseEnter(item)} @mouseleave=${() => this.#onMouseLeave(item)}>\r\n\t\t\t\t${when(\r\n\t\t\t\t\telement,\r\n\t\t\t\t\t() => element,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\tclass=${item.separatorAfter ? 'separator' : ''}\r\n\t\t\t\t\t\t\tpopovertarget=${item.unique}\r\n\t\t\t\t\t\t\t@click-label=${() => this.#onClick(item)}>\r\n\t\t\t\t\t\t\t${when(item.icon, (icon) => html`<uui-icon slot=\"icon\" name=${icon}></uui-icon>`)}\r\n\t\t\t\t\t\t\t<div slot=\"label\" class=\"menu-item\">\r\n\t\t\t\t\t\t\t\t<span>${item.label}</span>\r\n\t\t\t\t\t\t\t\t${when(item.items, () => html`<uui-symbol-expand></uui-symbol-expand>`)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t\t<umb-cascading-menu-popover id=${item.unique} placement=\"right-start\" .items=${item.items}>\r\n\t\t\t\t</umb-cascading-menu-popover>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\t...UUIPopoverContainerElement.styles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\r\n\t\t\t\tbackground: var(--uui-color-surface);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-3);\r\n\t\t\t\tpadding: var(--uui-size-space-1);\r\n\t\t\t}\r\n\r\n\t\t\t.menu-item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.separator::after {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-scroll-container {\r\n\t\t\t\tmax-height: 500px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbCascadingMenuPopoverElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-cascading-menu-popover': UmbCascadingMenuPopoverElement;\r\n\t}\r\n}\r\n"],"names":["_UmbCascadingMenuPopoverElement_instances","getPopoverById_fn","onMouseEnter_fn","onMouseLeave_fn","onClick_fn","renderItem_fn","UmbCascadingMenuPopoverElement","UUIPopoverContainerElement","__privateAdd","html","when","repeat","item","__privateMethod","popoverId","popover","element","icon","css","__decorateClass","property","customElement"],"mappings":";;;;;;;;8OAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAea,IAAAC,IAAN,cAA6CC,EAA2B;AAAA,EAAxE,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAR,CAAA;AAAA,EAAA;AAAA,EAsCG,SAAS;AACV,WAAAS;AAAA;AAAA,MAEHC;AAAA,MACD,KAAK,OAAO;AAAA,MACZ,MAAMD;AAAA,QACHE;AAAA,QACD,KAAK;AAAA,QACL,CAACC,MAASA,EAAK;AAAA,QACf,CAACA,MAASC,EAAK,MAAAb,GAAAK,CAAA,EAAL,KAAiB,MAAAO,CAAA;AAAA,MAC3B,CAAA;AAAA,QACC,MAAM,OAAQ,CAAA;AAAA;AAAA,MAEjB,MAAM,MAAM,OAAO;AAAA,IACnB,CAAA;AAAA;AAAA;AAAA,EAAA;AAkEL;AAtHOZ,IAAA,oBAAA,QAAA;AAINC,IAAe,SAACa,GAAkE;AACjF,SAAO,KAAK,YAAY,cAAc,IAAIA,CAAS,EAAE;AACtD;AAEAZ,IAAa,SAACU,GAA4B;AACrC,MAAA,CAACA,EAAK,OAAO,OAAQ;AAEzB,QAAMG,IAAUF,EAAA,MAAKb,GAALC,CAAA,EAAA,KAAA,MAAqBW,EAAK,MAAA;AAC1C,EAAKG,KAKLA,EAAQ,YAAY;AACrB;AAEAZ,IAAa,SAACS,GAA4B;AACzC,QAAMG,IAAUF,EAAA,MAAKb,GAALC,CAAA,EAAA,KAAA,MAAqBW,EAAK,MAAA;AAC1C,EAAKG,KAKLA,EAAQ,YAAY;AACrB;AAEAX,IAAQ,SAACQ,GAA4B;AACpC,EAAAA,EAAK,UAAU,GAEf,WAAW,MAAM;AAChB,IAAAC,EAAA,MAAKb,MAAL,KAAmB,MAAAY,CAAA;AAAA,KACjB,GAAG;AACP;AAqBAP,IAAW,SAACO,GAA4B;AACvC,QAAMI,IAAUJ,EAAK;AACrB,SAAII,KACKA,EAAA,aAAa,iBAAiBJ,EAAK,MAAM,GAE3CH;AAAA,sBACa,MAAMI,EAAK,MAAAb,GAAAE,CAAA,EAAL,KAAmB,MAAAU,CAAA,CAAK,gBAAgB,MAAMC,EAAA,MAAKb,GAALG,CAAA,EAAA,KAAA,MAAmBS,CAAK,CAAA;AAAA,MAC5FF;AAAA,IACDM;AAAA,IACA,MAAMA;AAAA,IACN,MAAMP;AAAA;AAAA,eAEIG,EAAK,iBAAiB,cAAc,EAAE;AAAA,uBAC9BA,EAAK,MAAM;AAAA,sBACZ,MAAMC,EAAA,MAAKb,GAALI,CAAA,EAAA,KAAA,MAAcQ,CAAK,CAAA;AAAA,SACtCF,EAAKE,EAAK,MAAM,CAACK,MAASR,+BAAkCQ,CAAI,cAAc,CAAC;AAAA;AAAA,gBAExEL,EAAK,KAAK;AAAA,UAChBF,EAAKE,EAAK,OAAO,MAAMH,0CAA6C,CAAC;AAAA;AAAA;AAAA;AAAA,EAI1E,CAAA;AAAA,qCACgCG,EAAK,MAAM,mCAAmCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAI5F;AApFYN,EAsFa,SAAS;AAAA,EACjC,GAAGC,EAA2B;AAAA,EAC9BW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6BD;AAnHAC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,MAAO,CAAA;AAAA,GADbd,EAEZ,WAAA,SAAA,CAAA;AAFYA,IAANa,EAAA;AAAA,EADNE,EAAc,4BAA4B;AAAA,GAC9Bf,CAAA;"}