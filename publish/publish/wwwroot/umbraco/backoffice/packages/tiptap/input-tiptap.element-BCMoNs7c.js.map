{"version":3,"file":"input-tiptap.element-BCMoNs7c.js","sources":["../../../src/packages/tiptap/components/input-tiptap/tiptap-toolbar.element.ts","../../../src/packages/tiptap/components/input-tiptap/input-tiptap.element.ts"],"sourcesContent":["import type { UmbTiptapToolbarValue } from '../types.js';\r\nimport { css, customElement, html, map, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbExtensionsElementAndApiInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport type { UmbPropertyEditorConfigCollection } from '@umbraco-cms/backoffice/property-editor';\r\n\r\nimport '../cascading-menu-popover/cascading-menu-popover.element.js';\r\n\r\n@customElement('umb-tiptap-toolbar')\r\nexport class UmbTiptapToolbarElement extends UmbLitElement {\r\n\t#attached = false;\r\n\t#extensionsController?: UmbExtensionsElementAndApiInitializer;\r\n\r\n\t@state()\r\n\tprivate _lookup?: Map<string, unknown>;\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@property({ attribute: false })\r\n\teditor?: Editor;\r\n\r\n\t@property({ attribute: false })\r\n\tconfiguration?: UmbPropertyEditorConfigCollection;\r\n\r\n\t@property({ attribute: false })\r\n\ttoolbar: UmbTiptapToolbarValue = [[[]]];\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis.#attached = true;\r\n\t\tthis.#observeExtensions();\r\n\t}\r\n\toverride disconnectedCallback(): void {\r\n\t\tthis.#attached = false;\r\n\t\tthis.#extensionsController?.destroy();\r\n\t\tthis.#extensionsController = undefined;\r\n\t\tsuper.disconnectedCallback();\r\n\t}\r\n\r\n\t#observeExtensions(): void {\r\n\t\tif (!this.#attached) return;\r\n\t\tthis.#extensionsController?.destroy();\r\n\r\n\t\tthis.#extensionsController = new UmbExtensionsElementAndApiInitializer(\r\n\t\t\tthis,\r\n\t\t\tumbExtensionsRegistry,\r\n\t\t\t'tiptapToolbarExtension',\r\n\t\t\t[],\r\n\t\t\t(manifest) => this.toolbar.flat(2).includes(manifest.alias),\r\n\t\t\t(extensionControllers) => {\r\n\t\t\t\tthis._lookup = new Map(extensionControllers.map((ext) => [ext.alias, ext.component]));\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\t() => import('../toolbar/default-tiptap-toolbar-element.api.js'),\r\n\t\t);\r\n\r\n\t\tthis.#extensionsController.apiProperties = { configuration: this.configuration };\r\n\t\tthis.#extensionsController.elementProperties = { editor: this.editor, configuration: this.configuration };\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${map(\r\n\t\t\t\tthis.toolbar,\r\n\t\t\t\t(row) => html`\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t${map(\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t(group) => html`<div class=\"group\">${map(group, (alias) => this._lookup?.get(alias) ?? nothing)}</div>`,\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`,\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = css`\r\n\t\t:host([readonly]) {\r\n\t\t\tpointer-events: none;\r\n\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t}\r\n\r\n\t\t:host {\r\n\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\tborder-bottom-left-radius: 0;\r\n\t\t\tborder-bottom-right-radius: 0;\r\n\r\n\t\t\tborder-top-color: var(--umb-tiptap-edge-border-color, var(--uui-color-border));\r\n\t\t\tborder-left-color: var(--umb-tiptap-edge-border-color, var(--uui-color-border));\r\n\t\t\tborder-right-color: var(--umb-tiptap-edge-border-color, var(--uui-color-border));\r\n\r\n\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\tcolor: var(--color-text);\r\n\t\t\tfont-size: var(--uui-type-default-size);\r\n\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\r\n\t\t\tposition: sticky;\r\n\t\t\ttop: -25px;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tpadding: var(--uui-size-3);\r\n\t\t\tz-index: 9999999;\r\n\r\n\t\t\tbox-shadow:\r\n\t\t\t\t0 2px 2px -2px rgba(34, 47, 62, 0.1),\r\n\t\t\t\t0 8px 8px -4px rgba(34, 47, 62, 0.07);\r\n\t\t}\r\n\r\n\t\t.row {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t.group {\r\n\t\t\t\tdisplay: inline-flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\talign-items: stretch;\r\n\r\n\t\t\t\t&:not(:last-child)::after {\r\n\t\t\t\t\tcontent: '';\r\n\t\t\t\t\tbackground-color: var(--uui-color-border);\r\n\t\t\t\t\twidth: 1px;\r\n\t\t\t\t\tplace-self: center;\r\n\t\t\t\t\theight: 22px;\r\n\t\t\t\t\tmargin: 0 var(--uui-size-3);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t`;\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tiptap-toolbar': UmbTiptapToolbarElement;\r\n\t}\r\n}\r\n","import type { UmbTiptapExtensionApi } from '../../extensions/types.js';\r\nimport type { UmbTiptapToolbarValue } from '../types.js';\r\nimport { css, customElement, html, property, state, unsafeCSS, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { loadManifestApi } from '@umbraco-cms/backoffice/extension-api';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\nimport type { CSSResultGroup } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { Extensions } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport type { UmbPropertyEditorConfigCollection } from '@umbraco-cms/backoffice/property-editor';\r\n\r\nimport './tiptap-toolbar.element.js';\r\n\r\nconst TIPTAP_CORE_EXTENSION_ALIAS = 'Umb.Tiptap.RichTextEssentials';\r\n\r\n@customElement('umb-input-tiptap')\r\nexport class UmbInputTiptapElement extends UmbFormControlMixin<string, typeof UmbLitElement, string>(UmbLitElement) {\r\n\t@property({ type: String })\r\n\toverride set value(value: string) {\r\n\t\tif (value === this.#value) return;\r\n\t\tthis.#value = value;\r\n\r\n\t\t// Try to set the value to the editor if it is ready.\r\n\t\tif (this._editor) {\r\n\t\t\tthis._editor.commands.setContent(value);\r\n\t\t}\r\n\t}\r\n\toverride get value() {\r\n\t\treturn this.#value;\r\n\t}\r\n\t#value = '';\r\n\r\n\t@property({ attribute: false })\r\n\tconfiguration?: UmbPropertyEditorConfigCollection;\r\n\r\n\t/**\r\n\t * Sets the input to required, meaning validation will fail if the value is empty.\r\n\t * @type {boolean}\r\n\t */\r\n\t@property({ type: Boolean })\r\n\trequired?: boolean;\r\n\r\n\t@property({ type: String })\r\n\trequiredMessage?: string;\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _editor?: Editor;\r\n\r\n\t@state()\r\n\tprivate readonly _extensions: Array<UmbTiptapExtensionApi> = [];\r\n\r\n\t@state()\r\n\tprivate _styles: Array<CSSResultGroup> = [];\r\n\r\n\t@state()\r\n\t_toolbar: UmbTiptapToolbarValue = [[[]]];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'valueMissing',\r\n\t\t\t() => this.requiredMessage ?? 'Value is required',\r\n\t\t\t() => !!this.required && this.isEmpty(),\r\n\t\t);\r\n\t}\r\n\r\n\tprotected override async firstUpdated() {\r\n\t\tawait Promise.all([await this.#loadExtensions(), await this.#loadEditor()]);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the editor is empty.\r\n\t * @returns {boolean} returns true if the editor contains no markup\r\n\t */\r\n\tpublic isEmpty(): boolean {\r\n\t\treturn this._editor?.isEmpty ?? false;\r\n\t}\r\n\r\n\tasync #loadExtensions() {\r\n\t\tconst enabledExtensions = this.configuration?.getValueByAlias<string[]>('extensions') ?? [];\r\n\r\n\t\t// Ensures that the \"Rich Text Essentials\" extension is always enabled. [LK]\r\n\t\tif (!enabledExtensions.includes(TIPTAP_CORE_EXTENSION_ALIAS)) {\r\n\t\t\tconst { api } = await import('../../extensions/core/rich-text-essentials.tiptap-api.js');\r\n\t\t\tthis._extensions.push(new api(this));\r\n\t\t}\r\n\r\n\t\tawait new Promise<void>((resolve) => {\r\n\t\t\tthis.observe(umbExtensionsRegistry.byTypeAndAliases('tiptapExtension', enabledExtensions), async (manifests) => {\r\n\t\t\t\tfor (const manifest of manifests) {\r\n\t\t\t\t\tif (manifest.api) {\r\n\t\t\t\t\t\tconst extension = await loadManifestApi(manifest.api);\r\n\t\t\t\t\t\tif (extension) {\r\n\t\t\t\t\t\t\tthis._extensions.push(new extension(this));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tasync #loadEditor() {\r\n\t\tconst element = this.shadowRoot?.querySelector('#editor');\r\n\t\tif (!element) return;\r\n\r\n\t\tconst dimensions = this.configuration?.getValueByAlias<{ width?: number; height?: number }>('dimensions');\r\n\t\tif (dimensions?.width) {\r\n\t\t\tthis.setAttribute('style', `max-width: ${dimensions.width}px;`);\r\n\t\t}\r\n\t\tif (dimensions?.height) {\r\n\t\t\telement.setAttribute('style', `height: ${dimensions.height}px;`);\r\n\t\t}\r\n\r\n\t\tthis._toolbar = this.configuration?.getValueByAlias<UmbTiptapToolbarValue>('toolbar') ?? [[[]]];\r\n\r\n\t\tconst tiptapExtensions: Extensions = [];\r\n\r\n\t\tthis._extensions.forEach((ext) => {\r\n\t\t\tconst tiptapExt = ext.getTiptapExtensions({ configuration: this.configuration });\r\n\t\t\tif (tiptapExt?.length) {\r\n\t\t\t\ttiptapExtensions.push(...tiptapExt);\r\n\t\t\t}\r\n\r\n\t\t\tconst styles = ext.getStyles();\r\n\t\t\tif (styles) {\r\n\t\t\t\tthis._styles.push(styles);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._editor = new Editor({\r\n\t\t\telement: element,\r\n\t\t\teditable: !this.readonly,\r\n\t\t\textensions: tiptapExtensions,\r\n\t\t\tcontent: this.#value,\r\n\t\t\t//enableContentCheck: true,\r\n\t\t\tonBeforeCreate: ({ editor }) => {\r\n\t\t\t\tthis._extensions.forEach((ext) => ext.setEditor(editor));\r\n\t\t\t},\r\n\t\t\tonContentError: ({ error }) => {\r\n\t\t\t\tconsole.error('contentError', [error.message, error.cause]);\r\n\t\t\t},\r\n\t\t\tonUpdate: ({ editor }) => {\r\n\t\t\t\tthis.#value = editor.getHTML();\r\n\t\t\t\tthis._runValidators();\r\n\t\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${when(\r\n\t\t\t\t!this._editor && !this._extensions?.length,\r\n\t\t\t\t() => html`<div id=\"loader\"><uui-loader></uui-loader></div>`,\r\n\t\t\t\t() => html`\r\n\t\t\t\t\t${this.#renderStyles()}\r\n\t\t\t\t\t<umb-tiptap-toolbar\r\n\t\t\t\t\t\t.toolbar=${this._toolbar}\r\n\t\t\t\t\t\t.editor=${this._editor}\r\n\t\t\t\t\t\t.configuration=${this.configuration}\r\n\t\t\t\t\t\t?readonly=${this.readonly}>\r\n\t\t\t\t\t</umb-tiptap-toolbar>\r\n\t\t\t\t`,\r\n\t\t\t)}\r\n\t\t\t<div id=\"editor\"></div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderStyles() {\r\n\t\tif (!this._styles?.length) return;\r\n\t\treturn html`\r\n\t\t\t<style>\r\n\t\t\t\t${this._styles.map((style) => unsafeCSS(style))}\r\n\t\t\t</style>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tz-index: 0;\r\n\t\t\t}\r\n\r\n\t\t\t:host([readonly]) {\r\n\t\t\t\tpointer-events: none;\r\n\r\n\t\t\t\t#editor {\r\n\t\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#loader {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t}\r\n\r\n\t\t\t:host(:not([pristine]):invalid),\r\n\t\t\t/* polyfill support */\r\n\t\t\t:host(:not([pristine])[internals-invalid]) {\r\n\t\t\t\t--umb-tiptap-edge-border-color: var(--uui-color-danger);\r\n\t\t\t\t#editor {\r\n\t\t\t\t\tborder-color: var(--uui-color-danger);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#editor {\r\n\t\t\t\t/* Required as overflow is set to auto, so that the scrollbars don't appear. */\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\toverflow: auto;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tpadding: 1rem;\r\n\t\t\t\tborder-top-left-radius: 0;\r\n\t\t\t\tborder-top-right-radius: 0;\r\n\t\t\t\tborder-top: 0;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t.tiptap {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\toutline: none;\r\n\t\t\t\t\twhite-space: pre-wrap;\r\n\t\t\t\t\tmin-width: 0;\r\n\r\n\t\t\t\t\t.is-editor-empty:first-child::before {\r\n\t\t\t\t\t\tcolor: var(--uui-color-text);\r\n\t\t\t\t\t\topacity: 0.55;\r\n\t\t\t\t\t\tcontent: attr(data-placeholder);\r\n\t\t\t\t\t\tfloat: left;\r\n\t\t\t\t\t\theight: 0;\r\n\t\t\t\t\t\tpointer-events: none;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* The following styles are required for the \"StarterKit\" extension. */\r\n\t\t\t\tpre {\r\n\t\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t\t\tpadding: var(--uui-size-space-2) var(--uui-size-space-4);\r\n\t\t\t\t\tborder-radius: calc(var(--uui-border-radius) * 2);\r\n\t\t\t\t\toverflow-x: auto;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcode:not(pre > code) {\r\n\t\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t\t\tpadding: var(--uui-size-space-1) var(--uui-size-space-2);\r\n\t\t\t\t\tborder-radius: calc(var(--uui-border-radius) * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcode {\r\n\t\t\t\t\tfont-family: 'Roboto Mono', monospace;\r\n\t\t\t\t\tbackground: none;\r\n\t\t\t\t\tcolor: inherit;\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t\tpadding: 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\th1,\r\n\t\t\t\th2,\r\n\t\t\t\th3,\r\n\t\t\t\th4,\r\n\t\t\t\th5,\r\n\t\t\t\th6 {\r\n\t\t\t\t\tmargin-top: 0;\r\n\t\t\t\t\tmargin-bottom: 0.5em;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\tmax-width: 100%;\r\n\r\n\t\t\t\tli {\r\n\t\t\t\t\t> p {\r\n\t\t\t\t\t\tmargin: 0;\r\n\t\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-tiptap': UmbInputTiptapElement;\r\n\t}\r\n}\r\n"],"names":["_attached","_extensionsController","_UmbTiptapToolbarElement_instances","observeExtensions_fn","UmbTiptapToolbarElement","UmbLitElement","__privateAdd","__privateSet","__privateMethod","__privateGet","html","map","row","group","alias","nothing","UmbExtensionsElementAndApiInitializer","umbExtensionsRegistry","manifest","extensionControllers","ext","css","__decorateClass","state","property","customElement","_value","_UmbInputTiptapElement_instances","loadExtensions_fn","loadEditor_fn","renderStyles_fn","TIPTAP_CORE_EXTENSION_ALIAS","UmbInputTiptapElement","UmbFormControlMixin","value","when","enabledExtensions","api","resolve","manifests","extension","loadManifestApi","element","dimensions","tiptapExtensions","tiptapExt","styles","Editor","editor","error","UmbChangeEvent","style","unsafeCSS"],"mappings":"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"}