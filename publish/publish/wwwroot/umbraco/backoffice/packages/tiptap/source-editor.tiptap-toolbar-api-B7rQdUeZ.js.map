{"version":3,"file":"source-editor.tiptap-toolbar-api-B7rQdUeZ.js","sources":["../../../src/packages/tiptap/extensions/toolbar/source-editor.tiptap-toolbar-api.ts"],"sourcesContent":["import { UmbTiptapToolbarElementApiBase } from '../base.js';\r\nimport { UMB_CODE_EDITOR_MODAL } from '@umbraco-cms/backoffice/code-editor';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UmbLocalizationController } from '@umbraco-cms/backoffice/localization-api';\r\n\r\nexport default class UmbTiptapToolbarSourceEditorExtensionApi extends UmbTiptapToolbarElementApiBase {\r\n\t#localize = new UmbLocalizationController(this);\r\n\r\n\toverride async execute(editor?: Editor) {\r\n\t\tif (!editor) return;\r\n\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modal = modalManager.open(this, UMB_CODE_EDITOR_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\theadline: this.#localize.term('tiptap_sourceCodeEdit'),\r\n\t\t\t\tcontent: editor?.getHTML() ?? '',\r\n\t\t\t\tlanguage: 'html',\r\n\t\t\t\tformatOnLoad: true,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tif (!modal) return;\r\n\r\n\t\tconst data = await modal.onSubmit().catch(() => undefined);\r\n\t\tif (!data) return;\r\n\r\n\t\teditor?.commands.setContent(data.content, true);\r\n\t}\r\n}\r\n"],"names":["UmbTiptapToolbarSourceEditorExtensionApi","UmbTiptapToolbarElementApiBase","#localize","UmbLocalizationController","editor","modal","UMB_MODAL_MANAGER_CONTEXT","UMB_CODE_EDITOR_MODAL","data"],"mappings":";;;;AAMA,MAAqBA,UAAiDC,EAA+B;AAAA,EACpGC,KAAY,IAAIC,EAA0B,IAAI;AAAA,EAE9C,MAAe,QAAQC,GAAiB;AACvC,QAAI,CAACA,EAAQ;AAGb,UAAMC,KADe,MAAM,KAAK,WAAWC,CAAyB,GACzC,KAAK,MAAMC,GAAuB;AAAA,MAC5D,MAAM;AAAA,QACL,UAAU,KAAKL,GAAU,KAAK,uBAAuB;AAAA,QACrD,SAASE,GAAQ,QAAA,KAAa;AAAA,QAC9B,UAAU;AAAA,QACV,cAAc;AAAA,MAAA;AAAA,IACf,CACA;AAED,QAAI,CAACC,EAAO;AAEZ,UAAMG,IAAO,MAAMH,EAAM,WAAW,MAAM,MAAA;AAAA,KAAe;AACzD,IAAKG,KAELJ,GAAQ,SAAS,WAAWI,EAAK,SAAS,EAAI;AAAA,EAAA;AAEhD;"}