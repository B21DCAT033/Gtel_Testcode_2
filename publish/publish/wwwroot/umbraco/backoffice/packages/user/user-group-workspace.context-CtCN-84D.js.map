{"version":3,"file":"user-group-workspace.context-CtCN-84D.js","sources":["../../../src/packages/user/user-group/workspace/user-group/components/user-group-entity-user-permission-list.element.ts","../../../src/packages/user/user-group/workspace/user-group/components/user-group-granular-permission-list.element.ts","../../../src/packages/user/user-group/workspace/user-group/user-group-workspace-editor.element.ts","../../../src/packages/user/user-group/workspace/user-group/user-group-workspace.context.ts"],"sourcesContent":["import { UMB_USER_GROUP_WORKSPACE_CONTEXT } from '../user-group-workspace.context-token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbSelectionChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-user-group-entity-user-permission-list')\r\nexport class UmbUserGroupEntityUserPermissionListElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _fallBackPermissions?: Array<string>;\r\n\r\n\t@state()\r\n\tprivate _entityTypes: Array<string> = [];\r\n\r\n\t#userGroupWorkspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#observeEntityUserPermissions();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#userGroupWorkspaceContext = instance;\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#userGroupWorkspaceContext.fallbackPermissions,\r\n\t\t\t\t(fallbackPermissions) => {\r\n\t\t\t\t\tthis._fallBackPermissions = fallbackPermissions;\r\n\t\t\t\t},\r\n\t\t\t\t'umbUserGroupEntityUserPermissionsObserver',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#observeEntityUserPermissions() {\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('entityUserPermission'),\r\n\t\t\t(manifests) => {\r\n\t\t\t\tthis._entityTypes = [...new Set(manifests.flatMap((manifest) => manifest.forEntityTypes))];\r\n\t\t\t},\r\n\t\t\t'umbUserPermissionsObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#onPermissionChange(event: UmbSelectionChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as any;\r\n\t\tconst verbs = target.allowedVerbs;\r\n\t\tif (verbs === undefined || verbs === null) throw new Error('The verbs are not defined');\r\n\t\tthis.#userGroupWorkspaceContext?.setFallbackPermissions(verbs);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html` ${this._entityTypes.map((entityType) => this.#renderPermissionsByEntityType(entityType))} `;\r\n\t}\r\n\r\n\t#renderPermissionsByEntityType(entityType: string) {\r\n\t\treturn html`\r\n\t\t\t<h4><umb-localize .key=${`user_permissionsEntityGroup_${entityType}`}>${entityType}</umb-localize></h4>\r\n\t\t\t<umb-input-entity-user-permission\r\n\t\t\t\t.entityType=${entityType}\r\n\t\t\t\t.allowedVerbs=${this._fallBackPermissions || []}\r\n\t\t\t\t@change=${this.#onPermissionChange}></umb-input-entity-user-permission>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [UmbTextStyles];\r\n}\r\n\r\nexport default UmbUserGroupEntityUserPermissionListElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-default-permission-list': UmbUserGroupEntityUserPermissionListElement;\r\n\t}\r\n}\r\n","import { UMB_USER_GROUP_WORKSPACE_CONTEXT } from '../user-group-workspace.context-token.js';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbExtensionElementInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport type { ManifestGranularUserPermission } from '@umbraco-cms/backoffice/user-permission';\r\nimport { html, customElement, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { filterFrozenArray } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n@customElement('umb-user-group-granular-permission-list')\r\nexport class UmbUserGroupGranularPermissionListElement extends UmbLitElement {\r\n\t@state()\r\n\t_userGroupPermissions?: Array<any>;\r\n\r\n\t#workspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#workspaceContext.data,\r\n\t\t\t\t(userGroup) => {\r\n\t\t\t\t\tthis._userGroupPermissions = userGroup?.permissions;\r\n\t\t\t\t},\r\n\t\t\t\t'umbUserGroupGranularPermissionObserver',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#onValueChange = (e: UmbChangeEvent) => {\r\n\t\te.stopPropagation();\r\n\t\t// TODO: make interface\r\n\t\tconst target = e.target as any;\r\n\t\tconst schemaType = target.manifest?.meta.schemaType;\r\n\t\tif (!schemaType) throw new Error('Schema type is not available');\r\n\r\n\t\t/* Remove all permissions of the same schema type from\r\n\t\tthe user group and append the new permissions.\r\n\t\tWe do it this way to support appends, updates and deletion without we know the\r\n\t\texact action but on the changed value */\r\n\t\tconst storedValueWithoutSchemaTypeItems = filterFrozenArray(\r\n\t\t\tthis.#workspaceContext?.getPermissions() || [],\r\n\t\t\t(x) => x.$type !== schemaType,\r\n\t\t);\r\n\r\n\t\tconst permissions = target.permissions || [];\r\n\t\tconst newCombinedValue = [...storedValueWithoutSchemaTypeItems, ...permissions];\r\n\r\n\t\tthis.#workspaceContext?.setPermissions(newCombinedValue);\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tif (!this._userGroupPermissions) return;\r\n\t\treturn html`<umb-extension-slot\r\n\t\t\ttype=\"userGranularPermission\"\r\n\t\t\t.renderMethod=${this.#renderProperty}></umb-extension-slot>`;\r\n\t}\r\n\r\n\t#renderProperty = (extension: UmbExtensionElementInitializer<ManifestGranularUserPermission>) => {\r\n\t\tif (!this._userGroupPermissions) return nothing;\r\n\t\tif (!extension.component) return nothing;\r\n\r\n\t\tconst manifest = extension.manifest;\r\n\t\tif (!manifest) throw new Error('Manifest is not available');\r\n\r\n\t\tconst label = manifest.meta.labelKey ? this.localize.term(manifest.meta.labelKey) : manifest.meta.label;\r\n\t\tconst description = manifest.meta.descriptionKey\r\n\t\t\t? this.localize.term(manifest.meta.descriptionKey)\r\n\t\t\t: manifest.meta.description;\r\n\r\n\t\tconst schemaType = manifest.meta.schemaType;\r\n\t\tconst permissionsForSchemaType =\r\n\t\t\tthis._userGroupPermissions.filter((permission) => permission.$type === schemaType) || [];\r\n\r\n\t\t(extension.component as any).permissions = permissionsForSchemaType;\r\n\t\textension.component.addEventListener(UmbChangeEvent.TYPE, this.#onValueChange);\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout .label=${label || ''} .description=${description || ''}>\r\n\t\t\t\t<div slot=\"editor\">${extension.component}</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t};\r\n}\r\n\r\nexport default UmbUserGroupGranularPermissionListElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-granular-permission-list': UmbUserGroupGranularPermissionListElement;\r\n\t}\r\n}\r\n","import type { UmbUserGroupDetailModel } from '../../types.js';\r\nimport { UMB_USER_GROUP_ROOT_WORKSPACE_PATH } from '../../paths.js';\r\nimport { UMB_USER_GROUP_WORKSPACE_CONTEXT } from './user-group-workspace.context-token.js';\r\nimport type { UUIBooleanInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, nothing, customElement, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement, umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbInputDocumentElement } from '@umbraco-cms/backoffice/document';\r\nimport type { UmbInputSectionElement } from '@umbraco-cms/backoffice/section';\r\nimport type { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbInputMediaElement } from '@umbraco-cms/backoffice/media';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbInputLanguageElement } from '@umbraco-cms/backoffice/language';\r\nimport { UMB_ICON_PICKER_MODAL } from '@umbraco-cms/backoffice/icon';\r\nimport type { UmbInputWithAliasElement } from '@umbraco-cms/backoffice/components';\r\n\r\nimport './components/user-group-entity-user-permission-list.element.js';\r\nimport './components/user-group-granular-permission-list.element.js';\r\n\r\n@customElement('umb-user-group-workspace-editor')\r\nexport class UmbUserGroupWorkspaceEditorElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _isNew?: boolean = false;\r\n\r\n\t@state()\r\n\tprivate _unique?: UmbUserGroupDetailModel['unique'];\r\n\r\n\t@state()\r\n\tprivate _name?: UmbUserGroupDetailModel['name'];\r\n\r\n\t@state()\r\n\tprivate _alias?: UmbUserGroupDetailModel['alias'];\r\n\r\n\t@state()\r\n\tprivate _aliasCanBeChanged?: UmbUserGroupDetailModel['aliasCanBeChanged'] = true;\r\n\r\n\t@state()\r\n\tprivate _icon: UmbUserGroupDetailModel['icon'] = null;\r\n\r\n\t@state()\r\n\tprivate _sections: UmbUserGroupDetailModel['sections'] = [];\r\n\r\n\t@state()\r\n\tprivate _languages: UmbUserGroupDetailModel['languages'] = [];\r\n\r\n\t@state()\r\n\tprivate _hasAccessToAllLanguages: UmbUserGroupDetailModel['hasAccessToAllLanguages'] = false;\r\n\r\n\t@state()\r\n\tprivate _documentStartNode?: UmbUserGroupDetailModel['documentStartNode'];\r\n\r\n\t@state()\r\n\tprivate _documentRootAccess: UmbUserGroupDetailModel['documentRootAccess'] = false;\r\n\r\n\t@state()\r\n\tprivate _mediaStartNode?: UmbUserGroupDetailModel['mediaStartNode'];\r\n\r\n\t@state()\r\n\tprivate _mediaRootAccess: UmbUserGroupDetailModel['mediaRootAccess'] = false;\r\n\r\n\t#workspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeUserGroup();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeUserGroup() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(this.#workspaceContext.isNew, (value) => (this._isNew = value), '_observeIsNew');\r\n\t\tthis.observe(this.#workspaceContext.unique, (value) => (this._unique = value ?? undefined), '_observeUnique');\r\n\t\tthis.observe(this.#workspaceContext.name, (value) => (this._name = value), '_observeName');\r\n\t\tthis.observe(this.#workspaceContext.alias, (value) => (this._alias = value), '_observeAlias');\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.aliasCanBeChanged,\r\n\t\t\t(value) => (this._aliasCanBeChanged = value),\r\n\t\t\t'_observeAliasCanBeChanged',\r\n\t\t);\r\n\t\tthis.observe(this.#workspaceContext.icon, (value) => (this._icon = value), '_observeIcon');\r\n\t\tthis.observe(this.#workspaceContext.sections, (value) => (this._sections = value), '_observeSections');\r\n\t\tthis.observe(this.#workspaceContext.languages, (value) => (this._languages = value), '_observeLanguages');\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.hasAccessToAllLanguages,\r\n\t\t\t(value) => (this._hasAccessToAllLanguages = value),\r\n\t\t\t'_observeHasAccessToAllLanguages',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.documentRootAccess,\r\n\t\t\t(value) => (this._documentRootAccess = value),\r\n\t\t\t'_observeDocumentRootAccess',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.documentStartNode,\r\n\t\t\t(value) => (this._documentStartNode = value),\r\n\t\t\t'_observeDocumentStartNode',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.mediaRootAccess,\r\n\t\t\t(value) => (this._mediaRootAccess = value),\r\n\t\t\t'_observeMediaRootAccess',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.mediaStartNode,\r\n\t\t\t(value) => (this._mediaStartNode = value),\r\n\t\t\t'_observeMediaStartNode',\r\n\t\t);\r\n\t}\r\n\r\n\t#onSectionsChange(event: UmbChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputSectionElement;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('sections', target.selection);\r\n\t}\r\n\r\n\t#onAllowAllLanguagesChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('hasAccessToAllLanguages', target.checked);\r\n\t}\r\n\r\n\t#onLanguagePermissionChange(event: UmbChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputLanguageElement;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('languages', target.selection);\r\n\t}\r\n\r\n\t#onAllowAllDocumentsChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('documentRootAccess', target.checked);\r\n\t\tthis.#workspaceContext?.updateProperty('documentStartNode', null);\r\n\t}\r\n\r\n\t#onDocumentStartNodeChange(event: CustomEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputDocumentElement;\r\n\t\tconst selected = target.selection?.[0];\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('documentStartNode', selected ? { unique: selected } : null);\r\n\t}\r\n\r\n\t#onAllowAllMediaChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('mediaRootAccess', target.checked);\r\n\t\tthis.#workspaceContext?.updateProperty('mediaStartNode', null);\r\n\t}\r\n\r\n\t#onMediaStartNodeChange(event: CustomEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputMediaElement;\r\n\t\tconst selected = target.selection?.[0];\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('mediaStartNode', selected ? { unique: selected } : null);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor class=\"uui-text\" back-path=${UMB_USER_GROUP_ROOT_WORKSPACE_PATH}>\r\n\t\t\t\t${this.#renderHeader()} ${this.#renderMain()}\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tasync #onIconClick() {\r\n\t\tconst [alias, color] = this._icon?.replace('color-', '')?.split(' ') ?? [];\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modalContext = modalManager.open(this, UMB_ICON_PICKER_MODAL, {\r\n\t\t\tvalue: {\r\n\t\t\t\ticon: alias,\r\n\t\t\t\tcolor: color,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tmodalContext?.onSubmit().then((saved) => {\r\n\t\t\tif (saved.icon && saved.color) {\r\n\t\t\t\tthis.#workspaceContext?.updateProperty('icon', `${saved.icon} color-${saved.color}`);\r\n\t\t\t} else if (saved.icon) {\r\n\t\t\t\tthis.#workspaceContext?.updateProperty('icon', saved.icon);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t#onNameAndAliasChange(event: InputEvent & { target: UmbInputWithAliasElement }) {\r\n\t\tthis.#workspaceContext?.updateProperty('name', event.target.value ?? '');\r\n\t\tthis.#workspaceContext?.updateProperty('alias', event.target.alias ?? '');\r\n\t}\r\n\r\n\t#renderHeader() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t<uui-button id=\"icon\" compact label=\"icon\" look=\"outline\" @click=${this.#onIconClick}>\r\n\t\t\t\t\t<umb-icon name=${this._icon || ''}></umb-icon>\r\n\t\t\t\t</uui-button>\r\n\r\n\t\t\t\t<umb-input-with-alias\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tlabel=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\talias=${ifDefined(this._alias)}\r\n\t\t\t\t\t?auto-generate-alias=${this._isNew}\r\n\t\t\t\t\t?alias-readonly=${this._aliasCanBeChanged === false}\r\n\t\t\t\t\t@change=${this.#onNameAndAliasChange}\r\n\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t</umb-input-with-alias>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMain() {\r\n\t\tif (!this._unique) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<div id=\"main\">\r\n\t\t\t\t<umb-stack>\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_assignAccess\"></umb-localize></div>\r\n\r\n\t\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('main_sections')}\r\n\t\t\t\t\t\t\tdescription=${this.localize.term('user_sectionsHelp')}>\r\n\t\t\t\t\t\t\t<umb-input-section\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\t.selection=${this._sections}\r\n\t\t\t\t\t\t\t\t@change=${this.#onSectionsChange}></umb-input-section>\r\n\t\t\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t\t\t${this.#renderLanguageAccess()} ${this.#renderDocumentAccess()} ${this.#renderMediaAccess()}\r\n\t\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_permissionsDefault\"></umb-localize></div>\r\n\r\n\t\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('user_entityPermissionsLabel')}\r\n\t\t\t\t\t\t\tdescription=${this.localize.term('user_entityPermissionsDescription')}>\r\n\t\t\t\t\t\t\t<umb-user-group-entity-user-permission-list slot=\"editor\"></umb-user-group-entity-user-permission-list>\r\n\t\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_permissionsGranular\"></umb-localize></div>\r\n\t\t\t\t\t\t<umb-user-group-granular-permission-list></umb-user-group-granular-permission-list>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t</umb-stack>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLanguageAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('treeHeaders_languages')}\r\n\t\t\t\tdescription=${this.localize.term('user_languagesHelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllLanguages')}\"\r\n\t\t\t\t\t\t.checked=${this._hasAccessToAllLanguages}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllLanguagesChange}></uui-toggle>\r\n\r\n\t\t\t\t\t${this._hasAccessToAllLanguages === false\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<umb-input-language\r\n\t\t\t\t\t\t\t\t\t.selection=${this._languages}\r\n\t\t\t\t\t\t\t\t\t@change=${this.#onLanguagePermissionChange}></umb-input-language>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t: nothing}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDocumentAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_selectContentStartNode')}\r\n\t\t\t\tdescription=${this.localize.term('user_startnodehelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllDocuments')}\"\r\n\t\t\t\t\t\t.checked=${this._documentRootAccess}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllDocumentsChange}></uui-toggle>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._documentRootAccess === false\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<umb-input-document\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t\t\t.selection=${this._documentStartNode?.unique ? [this._documentStartNode.unique] : []}\r\n\t\t\t\t\t\t\t\t@change=${this.#onDocumentStartNodeChange}></umb-input-document>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMediaAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_selectMediaStartNode')}\r\n\t\t\t\tdescription=${this.localize.term('user_mediastartnodehelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllMedia')}\"\r\n\t\t\t\t\t\t.checked=${this._mediaRootAccess}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllMediaChange}></uui-toggle>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._mediaRootAccess === false\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<umb-input-media\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t\t\t.selection=${this._mediaStartNode?.unique ? [this._mediaStartNode.unique] : []}\r\n\t\t\t\t\t\t\t\t@change=${this.#onMediaStartNodeChange}></umb-input-media>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#icon {\r\n\t\t\t\tfont-size: var(--uui-size-5);\r\n\t\t\t\theight: 30px;\r\n\t\t\t\twidth: 30px;\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#main {\r\n\t\t\t\tpadding: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbUserGroupWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-workspace-editor': UmbUserGroupWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { UmbUserGroupDetailModel } from '../../types.js';\r\nimport { UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS, type UmbUserGroupDetailRepository } from '../../repository/index.js';\r\nimport { UMB_USER_GROUP_ENTITY_TYPE, UMB_USER_GROUP_ROOT_ENTITY_TYPE } from '../../entity.js';\r\nimport { UmbUserGroupWorkspaceEditorElement } from './user-group-workspace-editor.element.js';\r\nimport { UMB_USER_GROUP_WORKSPACE_ALIAS } from './constants.js';\r\nimport type { UmbUserPermissionModel } from '@umbraco-cms/backoffice/user-permission';\r\nimport type { UmbRoutableWorkspaceContext, UmbSubmittableWorkspaceContext } from '@umbraco-cms/backoffice/workspace';\r\nimport {\r\n\tUmbEntityDetailWorkspaceContextBase,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbUserGroupWorkspaceContext\r\n\textends UmbEntityDetailWorkspaceContextBase<UmbUserGroupDetailModel, UmbUserGroupDetailRepository>\r\n\timplements UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext\r\n{\r\n\treadonly name = this._data.createObservablePartOfCurrent((data) => data?.name || '');\r\n\treadonly alias = this._data.createObservablePartOfCurrent((data) => data?.alias || '');\r\n\treadonly aliasCanBeChanged = this._data.createObservablePartOfCurrent((data) => data?.aliasCanBeChanged);\r\n\treadonly icon = this._data.createObservablePartOfCurrent((data) => data?.icon || null);\r\n\treadonly sections = this._data.createObservablePartOfCurrent((data) => data?.sections || []);\r\n\treadonly languages = this._data.createObservablePartOfCurrent((data) => data?.languages || []);\r\n\treadonly hasAccessToAllLanguages = this._data.createObservablePartOfCurrent(\r\n\t\t(data) => data?.hasAccessToAllLanguages || false,\r\n\t);\r\n\treadonly documentStartNode = this._data.createObservablePartOfCurrent((data) => data?.documentStartNode || null);\r\n\treadonly documentRootAccess = this._data.createObservablePartOfCurrent((data) => data?.documentRootAccess || false);\r\n\treadonly mediaStartNode = this._data.createObservablePartOfCurrent((data) => data?.mediaStartNode || null);\r\n\treadonly mediaRootAccess = this._data.createObservablePartOfCurrent((data) => data?.mediaRootAccess || false);\r\n\treadonly fallbackPermissions = this._data.createObservablePartOfCurrent((data) => data?.fallbackPermissions || []);\r\n\treadonly permissions = this._data.createObservablePartOfCurrent((data) => data?.permissions || []);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_USER_GROUP_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_USER_GROUP_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create',\r\n\t\t\t\tcomponent: UmbUserGroupWorkspaceEditorElement,\r\n\t\t\t\tsetup: async () => {\r\n\t\t\t\t\tawait this.createScaffold({ parent: { entityType: UMB_USER_GROUP_ROOT_ENTITY_TYPE, unique: null } });\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbUserGroupWorkspaceEditorElement,\r\n\t\t\t\tsetup: (component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tupdateProperty<Alias extends keyof UmbUserGroupDetailModel>(alias: Alias, value: UmbUserGroupDetailModel[Alias]) {\r\n\t\tthis._data.updateCurrent({ [alias]: value });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the user group user permissions.\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tgetPermissions() {\r\n\t\treturn this._data.getCurrent()?.permissions ?? [];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user group user permissions.\r\n\t * @param {Array<UmbUserPermissionModel>} permissions\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tsetPermissions(permissions: Array<UmbUserPermissionModel>) {\r\n\t\tthis._data.updateCurrent({ permissions: permissions });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the user group fallback permissions.\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tgetFallbackPermissions() {\r\n\t\treturn this._data.getCurrent()?.fallbackPermissions ?? [];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user group fallback permissions.\r\n\t * @param {Array<string>} fallbackPermissions\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tsetFallbackPermissions(fallbackPermissions: Array<string>) {\r\n\t\tthis._data.updateCurrent({ fallbackPermissions });\r\n\t}\r\n}\r\n\r\nexport { UmbUserGroupWorkspaceContext as api };\r\n"],"names":["_userGroupWorkspaceContext","_UmbUserGroupEntityUserPermissionListElement_instances","observeEntityUserPermissions_fn","onPermissionChange_fn","renderPermissionsByEntityType_fn","UmbUserGroupEntityUserPermissionListElement","UmbLitElement","__privateAdd","__privateMethod","UMB_USER_GROUP_WORKSPACE_CONTEXT","instance","__privateSet","__privateGet","fallbackPermissions","html","entityType","umbExtensionsRegistry","manifests","manifest","event","verbs","UmbTextStyles","__decorateClass","state","customElement","_workspaceContext","_onValueChange","_renderProperty","UmbUserGroupGranularPermissionListElement","target","schemaType","storedValueWithoutSchemaTypeItems","filterFrozenArray","x","permissions","newCombinedValue","extension","nothing","label","description","permissionsForSchemaType","permission","UmbChangeEvent","userGroup","_UmbUserGroupWorkspaceEditorElement_instances","observeUserGroup_fn","onSectionsChange_fn","onAllowAllLanguagesChange_fn","onLanguagePermissionChange_fn","onAllowAllDocumentsChange_fn","onDocumentStartNodeChange_fn","onAllowAllMediaChange_fn","onMediaStartNodeChange_fn","onIconClick_fn","onNameAndAliasChange_fn","renderHeader_fn","renderMain_fn","renderLanguageAccess_fn","renderDocumentAccess_fn","renderMediaAccess_fn","UmbUserGroupWorkspaceEditorElement","UMB_USER_GROUP_ROOT_WORKSPACE_PATH","value","selected","alias","color","UMB_MODAL_MANAGER_CONTEXT","UMB_ICON_PICKER_MODAL","saved","ifDefined","umbFocus","css","UmbUserGroupWorkspaceContext","UmbEntityDetailWorkspaceContextBase","host","UMB_USER_GROUP_WORKSPACE_ALIAS","UMB_USER_GROUP_ENTITY_TYPE","UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS","data","UMB_USER_GROUP_ROOT_ENTITY_TYPE","UmbWorkspaceIsNewRedirectController","component","info","unique"],"mappings":"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"}